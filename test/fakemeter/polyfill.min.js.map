{"version":3,"sources":["polyfill.min.js"],"names":["root","factory","define","amd","module","exports","meterPolyfill","this","window","between","value","low","high","mathMin","mathMax","isMeter","el","tagName","toUpperCase","METER_TAG","each","arrLike","fn","i","len","length","isUndefined","obj","isNull","isVoidValue","floatValue","parseFloat","isNaN","isFinite","getPropValue","meter","prop","isNullValue","min","max","PROP_MIN","METER_INITAL_VALUES","PROP_MAX","PROP_LOW","PROP_HIGH","PROP_OPTIMUM","PROP_VALUE","fixProps","propValues","METER_PROPS","calcLevel","optimum","percentage","level","LEVEL_OPTIMUM","LEVEL_SUBOPTIMUM","LEVEL_SUBSUBOPTIMUM","isFirefox","className","METER_VALUE_CLASSES","createNativeFunction","fnName","toString","nativeToString","bind","call","on","events","listener","useCapture","split","event","supports","addEventListener","attachEvent","hasAttribute","name","getAttribute","updateMeterStyle","valueElement","getElementsByTagName","style","width","_","observerSubtree","isObservered","MutationObserver","observer","mutations","mutation","polyfill","target","observe","documentElement","subtree","childList","DOMNodeInserted","e","context","meters","document","POLYFILL_FLAG","constructor","HTMLMeterElement","createShadowDom","defineEtter","observerAttr","setAttribute","VERSION","attributes","attributeFilter","DOMAttrModified","join","indexOf","attrName","propertychange","propertyName","srcElement","canHaveChildren","canHaveHTML","parent","parentNode","meterClone","createElement","replaceChild","innerHTML","METER_SHADOW_HTML","slashMeters","slashMeter","removeChild","getGetter","getSetter","TypeError","HTML_METER_ELEMENT_CONSTRICTOR_NAME","METHOD_SET_ATTRIBUTE","METHOD_CLONE_NODE","cloneNode","attersAsProps","defineProperty","get","set","attributeSetter","attr","toLowerCase","cloneNodeMethd","deep","clone","removeAttribute","navigator","userAgent","NOOP","METER_CLASS_PREFIX","inner","bar","METHOD_CREATE_ELEMENT","meterElement","nativeSupport","Math","version","support","CLASSES","calc","Object","o","property","etters","enumerable","configurable","number","__defineGetter__","__defineSetter__","Function","prototype","oThis","args","Array","slice","arguments","fnToBind","fnBound","apply","concat","create","Temp","hasOwn","hasOwnProperty","O","Properties","charAt","options","HTMLElement","Element","Node","WebKitMutationObserver","isReady","unknownElement","supportsDOMNodeInserted","supportsDOMAttrModified","testDiv","testChild","appendChild","setTimeout","checkReady","completed","readyState","isTop","frameElement","doScroll","polyfillWhenReady"],"mappings":"CACA,SAAUA,EAAMC,GACd,YAEsB,mBAAXC,SAAyBA,OAAOC,IACzCD,OAAOD,EAAQD,IACY,gBAAXI,SAAuBA,OAAOC,QAC9CD,OAAOC,QAAUJ,EAAQD,GAEzBA,EAAKM,cAAgBL,EAAQD,IAE9BO,KAAM,SAASC,GAChB,YAiDA,SAASC,GAAQC,EAAOC,EAAKC,GAC3B,MAAOC,GAAQC,EAAQH,EAAKD,GAAQE,GAGtC,QAASG,GAAQC,GACf,MAAOA,IAAMA,EAAGC,SAAWD,EAAGC,QAAQC,gBAAkBC,EAG1D,QAASC,GAAKC,EAASC,GAGrB,IAFA,GAAIC,GAAI,EACJC,EAAMH,EAAQI,OACXF,EAAIC,EAAKD,IACdD,EAAGD,EAAQE,GAAIA,GAInB,QAASG,GAAYC,GACnB,MAAsB,mBAARA,GAGhB,QAASC,GAAOD,GACd,MAAe,QAARA,EAGT,QAASE,GAAYF,GACnB,GAAIC,EAAOD,GACT,OAAO,CAET,IAAIG,GAAaC,WAAWJ,EAC5B,OAAOD,GAAYC,IAAQK,MAAMF,KAAgBG,SAASH,GAG5D,QAASI,GAAaC,EAAOC,GAC3B,GAAI1B,GAAQyB,EAAMC,GACdC,EAAcT,EAAOlB,GACrB4B,EACAC,EACA5B,CAEJ,QADAD,EAAQqB,WAAWrB,GACX0B,GACN,IAAKI,GACH9B,EAAQ2B,EACNI,EAAoBD,GACpB9B,CACF,MACF,KAAKgC,GACHJ,EAAMJ,EAAaC,EAAOK,GAC1B9B,EAAQ2B,EACNvB,EAAQwB,EAAKG,EAAoBC,IACjC5B,EAAQwB,EAAK5B,EACf,MACF,KAAKiC,GACHL,EAAMJ,EAAaC,EAAOK,GAC1B9B,EAAQ2B,EACNC,EACA7B,EAAQC,EAAO4B,EAAKJ,EAAaC,EAAOO,GAC1C,MACF,KAAKE,GACHL,EAAML,EAAaC,EAAOO,GAC1BhC,EAAQ2B,EACNE,EACA9B,EAAQC,EAAOwB,EAAaC,EAAOQ,GAAWJ,EAChD,MACF,KAAKM,GACHP,EAAMJ,EAAaC,EAAOK,GAC1BD,EAAML,EAAaC,EAAOO,GAC1BhC,EAAQ2B,GACLE,EAAMD,GAAO,EAAIA,EAClB7B,EAAQC,EAAO4B,EAAKC,EACtB,MACF,KAAKO,GACHR,EAAMJ,EAAaC,EAAOK,GAC1B9B,EAAQ2B,EACNC,EACA7B,EAAQC,EAAO4B,EAAKJ,EAAaC,EAAOO,IAK9C,MAAOhC,GAGT,QAASqC,GAASC,GAUhB,MATA5B,GAAK6B,EAAa,SAASb,GACzB,GAAI1B,GAAQsC,EAAWZ,EACnBP,GAAYnB,KACdA,EAAQ,MAENsC,EAAWZ,KAAU1B,IACvBsC,EAAWZ,GAAQ1B,KAGhBsC,EAGT,QAASE,GAAUf,GACjB,GAAIa,KACJ5B,GAAK6B,EAAa,SAASb,GACzBY,EAAWZ,GAAQD,EAAMC,KAE3BY,EAAaD,EAASC,EAEtB,IAAIV,GAAMJ,EAAac,EAAYR,GAC/BD,EAAML,EAAac,EAAYN,GAC/B/B,EAAMuB,EAAac,EAAYL,GAC/B/B,EAAOsB,EAAac,EAAYJ,GAChCO,EAAUjB,EAAac,EAAYH,GACnCnC,EAAQwB,EAAac,EAAYF,GAEjCM,EAAad,IAAQC,EAAM,GAAK7B,EAAQ4B,IAAQC,EAAMD,GAAO,IAC7De,EAAQC,CAmDZ,OAhDE1C,KAAS2B,GACT5B,IAAQ2B,GACPa,GAAWxC,GAAOwC,GAAWvC,GAG3BD,GAAOwC,GAAWzC,EAAQC,GAC1BA,EAAMwC,GAAWzC,EAAQC,GACzBC,EAAOuC,GAAWzC,EAAQE,GAC1BA,GAAQuC,GAAWzC,EAAQE,KAE5ByC,EAAQE,GAED5C,IAAQC,GAEdD,GAAOwC,GAAWzC,EAAQC,GAC1BC,EAAOuC,GAAWzC,EAAQE,KAE3ByC,EAAQG,GAEDL,EAAUxC,EACfD,EAAQC,GAAOD,GAASE,EAC1ByC,EAAQE,EACC7C,EAAQE,IACjByC,EAAQG,GAEDL,EAAUvC,IACfF,GAASC,GAAOD,EAAQE,EAC1ByC,EAAQE,EACC7C,EAAQC,IACjB0C,EAAQG,IAMRC,IACEnB,IAAQC,IACVa,EAAa,MAIVD,EAAUvC,GAAQF,IAAUE,GAC5BuC,EAAUxC,GAAOD,IAAUC,KAE9B0C,EAAQE,KAKVH,WAAYA,EACZC,MAAOA,EACPK,UAAWC,EAAoBN,IAgHnC,QAASO,GAAqBC,EAAQvC,GACpC,QAASwC,KACP,MAAO,YAAcD,EAAS,uBAGhC,GAAIE,GAAiBD,EAASA,SAASA,QASvC,OALAA,GAASA,SAAWE,EAAKC,KAAKF,EAAgBA,GAE9CD,EAASA,SAASA,SAAWA,EAASA,SAEtCxC,EAAGwC,SAAWA,EACPxC,EA0DT,QAAS4C,GAAGlD,EAAImD,EAAQC,EAAUC,GAC3BrD,GAGLI,EAAK+C,EAAOG,MAAM,KAAM,SAASC,GAC3BC,GAASC,iBACXzD,EAAGyD,iBAAiBF,EAAOH,IAAYC,GAC9BG,GAASE,YAClB1D,EAAG0D,YAAY,KAAOH,EAAOH,GAE7BpD,EAAG,KAAOuD,GAASH,IAoCzB,QAASO,GAAa3D,EAAI4D,GACxB,MAAIJ,IAASG,aACJ3D,EAAG2D,aAAaC,GAEU,OAA1B5D,EAAG6D,aAAaD,GAI3B,QAASE,GAAiB3C,GACxB,GAAIkB,GAAQH,EAAUf,EAEtB,KACE,GAAI4C,GAAe5C,EAAM6C,qBAAqB,OAAO,EACrDD,GAAarB,UAAYL,EAAMK,UAC/BqB,EAAaE,MAAMC,MAAQ7B,EAAMD,WAAa,IAC9C,MAAO+B,IAET,MAAOhD,GAYT,QAASiD,KACP,IAAIC,EAAJ,CAKA,GAAIb,GAASc,iBAAkB,CAC7B,GAAIC,GAAW,GAAID,GAAiB,SAASE,GAC3CpE,EAAKoE,EAAW,SAASC,GACvBC,EAASD,EAASE,WAItBJ,GAASK,QAAQC,GACfC,SAAS,EACTC,WAAW,QAEJvB,IAASwB,iBAClB9B,EAAG2B,EAAiB,kBAAmB,SAASI,GAC9CP,EAASO,EAAEN,SAKfN,IAAe,GAGjB,QAASK,GAASQ,GAChB,GAAIC,KAEFA,GADEpF,EAAQmF,IACAA,IAEAA,GAAWE,GAAUpB,qBAAqB7D,GAGtDC,EAAK+E,EAAQ,SAAShE,GACpB,IAAIA,EAAMkE,GAAV,CAIA,IAAK1B,EAAaxC,EAAOkE,GAAgB,CAEvC,IACElE,EAAMmE,YAAcC,EACpB,MAAOpB,IAGThD,EAAQqE,EAAgBrE,GACxBsE,EAAYtE,GACZuE,EAAavE,GAEbA,EAAMwE,aAAaN,EAAeO,GAGpC9B,EAAiB3C,GACjBA,EAAMkE,GAAiBO,KAI3B,QAASF,GAAavE,GAEpB,GAAIqC,GAASc,iBAAkB,CAC7B,GAAIC,GAAW,GAAID,GAAiB,SAASE,GAC3CpE,EAAKoE,EAAW,SAASC,GACvBX,EAAiBW,EAASE,WAG9BJ,GAASK,QAAQzD,GACf0E,YAAY,EACZC,gBAAiB7D,QAEVuB,IAASuC,gBAClB7C,EAAG/B,EAAO,kBAAmB,SAAS8D,GAChChD,EAAY+D,KAAK,KAAKC,QAAQhB,EAAEiB,WAAY,GAC9CpC,EAAiBmB,EAAEN,UAGdnB,GAAS2C,gBAClBjD,EAAG/B,EAAO,iBAAkB,SAAS8D,GAC/BhD,EAAY+D,KAAK,KAAKC,QAAQhB,EAAEmB,eAAgB,GAClDtC,EAAiBmB,EAAEoB,cAQ3B,QAASb,GAAgBrE,GACvB,GAAIA,EAAMmF,mBAAoB,GAASnF,EAAMoF,eAAgB,EAAO,CAElE,GAAIC,GAASrF,EAAMsF,UACnB,IAAID,EAAQ,CACV,GAAIE,GAAaC,EAAcxG,EAC/BC,GAAK6B,EAAa,SAASb,GACzB,GAAI1B,GAAQyB,EAAMC,EACbP,GAAYnB,KACfgH,EAAWtF,GAAQD,EAAMC,MAG7BoF,EAAOI,aAAaF,EAAYvF,GAChCuF,EAAWG,UAAYC,GACvB3F,EAAQuF,CAGR,IAAIK,GAAcP,EAAOxC,qBAAqB,IAAM7D,EACpDC,GAAK2G,EAAa,SAASC,GACzBR,EAAOS,YAAYD,UAYvB7F,GAAM0F,UAAYC,EAEpB,OAAO3F,GAGT,QAASsE,GAAYtE,GAanB,QAAS+F,GAAU9F,GACjB,MAAO,YACL,MAAOF,GAAac,EAAYZ,IAIpC,QAAS+F,GAAU/F,GACjB,MAAO,UAAS1B,GACd,GAAImB,EAAYnB,GACd,KAAI+C,GACI,GAAI2E,WAAU,2BAA6BC,EAAsC,IAAMjG,EAAO,0CAE9F,GAAIgG,WAAU,sBAAyBhG,EAAO,kBAAsBiG,EAAsC,8CASpH,OALA3H,GAAQkB,EAAOlB,GAAS,EAAIqB,WAAWrB,GAEvCiG,EAAavE,EAAM1B,GACnBsC,EAAWZ,GAAQ1B,EACnBoE,EAAiB3C,GACVzB,GAjCX,GAAI4H,GAAuB,eACvBC,EAAoB,YACpBvF,KACA2D,EAAe3C,EAAKC,KAAK9B,EAAMmG,GAAuBnG,GACtDqG,EAAYxE,EAAKC,KAAK9B,EAAMoG,GAAoBpG,EAEpDf,GAAK6B,EAAa,SAASb,GACzBY,EAAWZ,GAAQD,EAAM0C,aAAazC,KAGxCY,EAAaD,EAASC,GA2BjBwB,GAASiE,eACZrH,EAAK6B,EAAa,SAASb,GACzBsG,EAAevG,EAAOC,GACpBuG,IAAKT,EAAU9F,GACfwG,IAAKT,EAAU/F,MAKrB,IAAIyG,GAAkBjF,EAAqB0E,EAAsB,SAASQ,EAAMpI,GAC9EiG,EAAamC,EAAMpI,GACnBoI,EAAOA,EAAKC,cACZ3H,EAAK6B,EAAa,SAASb,GACrBA,IAAS0G,IACX9F,EAAWZ,GAAQP,EAAYnB,IAAUkB,EAAOlB,GAAS,KAAOqB,WAAWrB,GAC3EoE,EAAiB3C,OAKvBuG,GAAevG,EAAOmG,GACpB5H,MAAOmI,GAGT,IAAIG,GAAiBpF,EAAqB2E,EAAmB,SAASU,GACpE,GAAIC,GAAQV,GAAU,EAGtB,OAFAU,GAAMC,gBAAgB9C,GACtBX,EAASwD,GACFA,GAGTR,GAAevG,EAAOoG,GACpB7H,MAAOsI,IAxpBX,GAAI7H,GAAY,YACZyF,EAAU,QAEVnD,EAAYjD,EAAO4I,UAAUC,UAAUpC,QAAQ,YAAa,EAE5DqC,EAAO,aAEPhG,EAAgB,EAChBC,EAAmB,EACnBC,EAAsB,EACtB+F,EAAqB,SAErB5F,GACF6F,MAAOD,EAAqB,gBAC5BE,IAAKF,EAAqB,MAG5B5F,GAAoBL,GAAiBiG,EAAqB,gBAC1D5F,EAAoBJ,GAAoBgG,EAAqB,mBAC7D5F,EAAoBH,GAAuB+F,EAAqB,sBAEhE,IAAI/G,GAAW,MACXE,EAAW,MACXC,EAAW,MACXC,EAAY,OACZE,EAAa,QACbD,EAAe,UAEfI,GAAeT,EAAUE,EAAUC,EAAUC,EAAWC,EAAcC,GAEtE4G,EAAwB,gBAExBjH,GACFH,IAAK,EACLC,IAAK,GAKH6D,EAAW5F,EAAO4F,SAElBuD,EAAevD,EAASsD,GAAuBvI,GAC/CyI,EAAgBD,EAAajH,KAAcD,EAAoBC,GAE/D7B,EAAUgJ,KAAKrH,GACf1B,EAAU+I,KAAKnH,GA0KfpC,GACFwJ,QAASlD,EACTmD,QAASH,EACTI,QAASrG,EACTJ,iBAAkBA,EAClBD,cAAeA,EACfE,oBAAqBA,EACrByG,KAAM/G,EACNwC,SAAU4D,EAGZ,IAAIM,EACF,MAAOtJ,EAKT,IAAI+F,GAAgB,YAEhBR,EAAkBO,EAASP,gBAE3B6C,CAEFA,GADEwB,OAAOxB,eACQ,SAASyB,EAAGC,EAAUC,GACrCA,EAAOC,YAAa,EACpBD,EAAOE,cAAe,CAEtB,KACEL,OAAOxB,eAAeyB,EAAGC,EAAUC,GACnC,MAAOpE,GACHA,EAAEuE,UAAW,aACfH,EAAOC,YAAa,EACpBJ,OAAOxB,eAAeyB,EAAGC,EAAUC,MAKrC,oBAAsBxE,GACP,SAASsE,EAAGC,EAAUC,GACjCA,EAAO1B,KACTwB,EAAEM,iBAAiBL,EAAUC,EAAO1B,KAElC0B,EAAOzB,KACTuB,EAAEO,iBAAiBN,EAAUC,EAAOzB,MAIvB,SAASuB,EAAGC,EAAUC,GACjCA,EAAO1B,MACTwB,EAAEC,GAAYC,EAAO1B,IAAI1E,KAAKkG,IAOtC,IAAInG,GAAO2G,SAASC,UAAU5G,MAAQ,SAAS6G,GAC7C,GAAIC,GAAOC,MAAMH,UAAUI,MAAM/G,KAAKgH,UAAW,GAC7CC,EAAW3K,KACX+I,EAAO,aACP6B,EAAU,WACV,MAAOD,GAASE,MACd7K,eAAgB+I,GAAO/I,KAAOsK,GAAStK,KACvCuK,EAAKO,OAAON,MAAMH,UAAUI,MAAM/G,KAAKgH,aAS7C,OALI1K,MAAKqK,YACPtB,EAAKsB,UAAYrK,KAAKqK,WAExBO,EAAQP,UAAY,GAAItB,GAEjB6B,GAMLG,EAASpB,OAAOoB,QAAU,WAC5B,QAASC,MACT,GAAIC,GAAStB,OAAOU,UAAUa,cAE9B,OAAO,UAAUC,GACf,GAAgB,gBAALA,GACT,KAAMtD,WAAU,iDAElBmD,GAAKX,UAAYc,CACjB,IAAI/J,GAAM,GAAI4J,EAEd,IADAA,EAAKX,UAAY,KACbK,UAAUxJ,OAAS,EAAG,CACxB,GAAIkK,GAAazB,OAAOe,UAAU,GAClC,KAAK,GAAI7I,KAAQuJ,GACXH,EAAOvH,KAAK0H,EAAYvJ,KAC1BT,EAAIS,GAAQuJ,EAAWvJ,IAI7B,MAAOT,OAIP0G,GACF,OACAlH,EAAUyK,OAAO,GAAG1K,cACpBC,EAAU6J,MAAM,GAAGjC,cACnB,WACA/B,KAAK,IAqBHW,EAAgB,SAAUA,GAC5B,MAAIA,GAAcyD,MACT,WACL,MAAOzD,GAAcyD,MAAMhF,EAAU6E,YAGhC,SAAShK,EAAS4K,GACvB,MAAOlE,GAAc1G,EAAS4K,KAGjCzF,EAASsD,IAERnD,EAAmB/F,EAAO6H,IAAwC,WACpE,GAAI9B,GAAmB3C,EAAqByE,EAAqC,WAC/E,KAAG5E,GACK,GAAI2E,WAAU,wBAEd,GAAIA,WAAU,yBAKpBwC,GACFpK,EAAOsL,aACPnC,EAAarD,aACb9F,EAAOuL,SACPvL,EAAOwL,MACP1C,GAAMsB,SAOR,OALAA,GAAYU,EAAOV,GAEnBrE,EAAiBqE,UAAYA,EAC7BrE,EAAiBqE,UAAUtE,YAAcC,EAElC/F,EAAO6H,GAAuC9B,KAInDjB,EAAmB9E,EAAO8E,kBAAoB9E,EAAOyL,uBACrD5G,GAAe,EACf6G,GAAU,CAEdvC,GAAaxI,GAAaA,CAC1B,IAAIqD,KACFc,mBAAoBA,EACpBb,mBAAoBjE,EAAOiE,iBAC3BC,cAAelE,EAAOkE,YACtB+D,cAAekB,EAAa9E,aAAa1D,KAAeA,EACxDgL,iBAAkBxC,EAAarD,YAC/B3B,eAAgBgF,EAAahF,aAC7BwC,eAAgB,oBAAsBf,GAkBxC,KAAK5B,GAASc,iBAAkB,CAC9B,GAAI8G,KAA0B,EAC1BC,IAA0B,EAC1BC,GAAU3E,EAAc,OACxB4E,GAAY5E,EAAc,MAC9BzD,GAAGoI,GAAS,kBAAmB,WAC7BF,IAA0B,IAE5BE,GAAQE,YAAYD,IACpBrI,EAAGoI,GAAS,kBAAmB,WAC7BD,IAA0B,IAE5BC,GAAQ3F,aAAanE,EAAU,GAC/B+J,GAAY,KACZD,GAAU,KAEV9H,GAASwB,gBAAkBoG,GAC3B5H,GAASuC,gBAAkBsF,GAG7B,GAAIvE,KACF,eAAiBnE,EAAoB6F,MAAQ,KAC3C,eAAiB7F,EAAoB8F,IAAM,KACzC,eAAiB9F,EAAoBJ,GAAoB,sBACzD,SACF,SACF,UACAyD,KAAK,IAEHyF,GAAajM,EAAOiM,UAoRxB,OA7PArG,GAASsD,GAAyB9F,EAAqB8F,EAAuB,WAC5E,GAAI1I,GAAK2G,EAAcyD,MAAMhF,EAAU6E,UAIvC,OAHIlK,GAAQC,IACV0E,EAAS1E,GAEJA,IAyMT,QAAU0L,KAER,QAASC,KACqB,aAAxBvG,EAASwG,aACXV,GAAU,GAGdS,IAEAzI,EAAGkC,EAAU,mBAAoB,WAC/B8F,GAAU,IAGZhI,EAAG1D,EAAQ,OAAQ,WACjB0L,GAAU,IAGZhI,EAAGkC,EAAU,mBAAoBuG,EAGjC,IAAIE,IAAQ,CACZ,KACEA,EAAQjL,EAAOpB,EAAOsM,cACtB,MAAO3H,KAEJX,GAASC,kBAAoBoB,EAAgBkH,UAAYF,IAC5D,QAAUE,KACR,IACElH,EAAgBkH,WAChBb,GAAU,EACV,MAAO/G,GACP,MAAOsH,IAAWM,EAAU,WAMpC,QAAUC,KACJd,GACFxG,IACAN,KAEAqH,GAAWO,EAAmB,OAIlC1M,EAAcoF,SAAWA,EAClBpF","file":"polyfill.min.js","sourcesContent":["/* globals define: true, module: true*/\n(function(root, factory) {\n  'use strict';\n\n  if (typeof define === 'function' && define.amd) {\n    define(factory(root));\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory(root);\n  } else {\n    root.meterPolyfill = factory(root);\n  }\n})(this, function(window) {\n  'use strict';\n\n  var METER_TAG = 'FAKEMETER';\n  var VERSION = '1.2.2';\n\n  var isFirefox = window.navigator.userAgent.indexOf('Firefox') > -1;\n\n  var NOOP = function() {};\n\n  var LEVEL_OPTIMUM = 1;\n  var LEVEL_SUBOPTIMUM = 2;\n  var LEVEL_SUBSUBOPTIMUM = 3;\n  var METER_CLASS_PREFIX = 'meter-';\n\n  var METER_VALUE_CLASSES = {\n    inner: METER_CLASS_PREFIX + 'inner-element',\n    bar: METER_CLASS_PREFIX + 'bar'\n  };\n\n  METER_VALUE_CLASSES[LEVEL_OPTIMUM] = METER_CLASS_PREFIX + 'optimum-value';\n  METER_VALUE_CLASSES[LEVEL_SUBOPTIMUM] = METER_CLASS_PREFIX + 'suboptimum-value';\n  METER_VALUE_CLASSES[LEVEL_SUBSUBOPTIMUM] = METER_CLASS_PREFIX + 'even-less-good-value';\n\n  var PROP_MIN = 'min';\n  var PROP_MAX = 'max';\n  var PROP_LOW = 'low';\n  var PROP_HIGH = 'high';\n  var PROP_VALUE = 'value';\n  var PROP_OPTIMUM = 'optimum';\n\n  var METER_PROPS = [PROP_MIN, PROP_MAX, PROP_LOW, PROP_HIGH, PROP_OPTIMUM, PROP_VALUE];\n\n  var METHOD_CREATE_ELEMENT = 'createElement';\n\n  var METER_INITAL_VALUES = {\n    min: 0,\n    max: 1\n  };\n\n  // var PRECISION = isFirefox ? 16 : 6; // firefox and chrome use different precision\n\n  var document = window.document;\n\n  var meterElement = document[METHOD_CREATE_ELEMENT](METER_TAG);\n  var nativeSupport = meterElement[PROP_MAX] === METER_INITAL_VALUES[PROP_MAX];\n\n  var mathMin = Math[PROP_MIN];\n  var mathMax = Math[PROP_MAX];\n\n  function between(value, low, high) {\n    return mathMin(mathMax(low, value), high);\n  }\n\n  function isMeter(el) {\n    return el && el.tagName && el.tagName.toUpperCase() === METER_TAG;\n  }\n\n  function each(arrLike, fn) {\n    var i = 0;\n    var len = arrLike.length;\n    for (; i < len; i++) {\n      fn(arrLike[i], i);\n    }\n  }\n\n  function isUndefined(obj) {\n    return typeof obj === 'undefined';\n  }\n\n  function isNull(obj) {\n    return obj === null;\n  }\n\n  function isVoidValue(obj) {\n    if (isNull(obj)) {\n      return false;\n    }\n    var floatValue = parseFloat(obj);\n    return isUndefined(obj) || isNaN(floatValue) || !isFinite(floatValue);\n  }\n\n  function getPropValue(meter, prop) {\n    var value = meter[prop];\n    var isNullValue = isNull(value);\n    var min;\n    var max;\n    var low;\n    value = parseFloat(value);\n    switch (prop) {\n      case PROP_MIN:\n        value = isNullValue ?\n          METER_INITAL_VALUES[PROP_MIN] :\n          value;\n        break;\n      case PROP_MAX:\n        min = getPropValue(meter, PROP_MIN);\n        value = isNullValue ?\n          mathMax(min, METER_INITAL_VALUES[PROP_MAX]) :\n          mathMax(min, value);\n        break;\n      case PROP_LOW:\n        min = getPropValue(meter, PROP_MIN);\n        value = isNullValue ?\n          min :\n          between(value, min, getPropValue(meter, PROP_MAX));\n        break;\n      case PROP_HIGH:\n        max = getPropValue(meter, PROP_MAX);\n        value = isNullValue ?\n          max :\n          between(value, getPropValue(meter, PROP_LOW), max);\n        break;\n      case PROP_OPTIMUM:\n        min = getPropValue(meter, PROP_MIN);\n        max = getPropValue(meter, PROP_MAX);\n        value = isNullValue ?\n          (max - min) / 2 + min :\n          between(value, min, max);\n        break;\n      case PROP_VALUE:\n        min = getPropValue(meter, PROP_MIN);\n        value = isNullValue ?\n          min :\n          between(value, min, getPropValue(meter, PROP_MAX));\n        break;\n      default:\n        break;\n    }\n    return value;\n  }\n\n  function fixProps(propValues) {\n    each(METER_PROPS, function(prop) {\n      var value = propValues[prop];\n      if (isVoidValue(value)) {\n        value = null;\n      }\n      if (propValues[prop] !== value) {\n        propValues[prop] = value;\n      }\n    });\n    return propValues;\n  }\n\n  function calcLevel(meter) {\n    var propValues = {};\n    each(METER_PROPS, function(prop) {\n      propValues[prop] = meter[prop];\n    });\n    propValues = fixProps(propValues);\n\n    var min = getPropValue(propValues, PROP_MIN);\n    var max = getPropValue(propValues, PROP_MAX);\n    var low = getPropValue(propValues, PROP_LOW);\n    var high = getPropValue(propValues, PROP_HIGH);\n    var optimum = getPropValue(propValues, PROP_OPTIMUM);\n    var value = getPropValue(propValues, PROP_VALUE);\n\n    var percentage = min === max ? 0 : (value - min) / (max - min) * 100;\n    var level = LEVEL_OPTIMUM;\n\n    if (\n      high === max ||\n      low === min ||\n      (optimum >= low && optimum <= high)\n    ) {\n      if (\n        (low <= optimum && value < low) ||\n        (low > optimum && value > low) ||\n        (high < optimum && value < high) ||\n        (high >= optimum && value > high)\n      ) {\n        level = LEVEL_SUBOPTIMUM;\n      }\n    } else if (low === high) {\n      if (\n        (low <= optimum && value < low) ||\n        (high > optimum && value > high)\n      ) {\n        level = LEVEL_SUBSUBOPTIMUM;\n      }\n    } else if (optimum < low) {\n      if (value > low && value <= high) {\n        level = LEVEL_SUBOPTIMUM;\n      } else if (value > high) {\n        level = LEVEL_SUBSUBOPTIMUM;\n      }\n    } else if (optimum > high) {\n      if (value >= low && value < high) {\n        level = LEVEL_SUBOPTIMUM;\n      } else if (value < low) {\n        level = LEVEL_SUBSUBOPTIMUM;\n      }\n    }\n\n    // firefox show diffently from chrome\n    // when value === high/low or min === max\n    if (isFirefox) {\n      if (min === max) {\n        percentage = 100;\n      }\n\n      if (\n          (optimum > high && value === high) ||\n          (optimum < low && value === low)\n       ) {\n        level = LEVEL_SUBOPTIMUM;\n      }\n    }\n\n    return {\n      percentage: percentage,\n      level: level,\n      className: METER_VALUE_CLASSES[level]\n    };\n  }\n\n  var meterPolyfill = {\n    version: VERSION,\n    support: nativeSupport,\n    CLASSES: METER_VALUE_CLASSES,\n    LEVEL_SUBOPTIMUM: LEVEL_SUBOPTIMUM,\n    LEVEL_OPTIMUM: LEVEL_OPTIMUM,\n    LEVEL_SUBSUBOPTIMUM: LEVEL_SUBSUBOPTIMUM,\n    calc: calcLevel,\n    polyfill: NOOP\n  };\n\n  if (nativeSupport) {\n    return meterPolyfill;\n  }\n\n  /* polyfill starts */\n\n  var POLYFILL_FLAG = '_polyfill';\n\n  var documentElement = document.documentElement;\n\n  var defineProperty;\n  if (Object.defineProperty) {\n    defineProperty = function(o, property, etters) {\n      etters.enumerable = true;\n      etters.configurable = true;\n\n      try {\n        Object.defineProperty(o, property, etters);\n      } catch (e) {\n        if (e.number === -0x7FF5EC54) {\n          etters.enumerable = false;\n          Object.defineProperty(o, property, etters);\n        }\n      }\n    };\n  } else {\n    if ('__defineSetter__' in documentElement) {\n      defineProperty = function(o, property, etters) {\n        if (etters.get) {\n          o.__defineGetter__(property, etters.get);\n        }\n        if (etters.set) {\n          o.__defineSetter__(property, etters.set);\n        }\n      };\n    } else {\n      defineProperty = function(o, property, etters) {\n        if (etters.get) {\n          o[property] = etters.get.call(o);\n        }\n      };\n    }\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\n  var bind = Function.prototype.bind || function(oThis) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    var fnToBind = this;\n    var NOOP = function() {};\n    var fnBound = function() {\n        return fnToBind.apply(\n          this instanceof NOOP ? this : oThis || this,\n          args.concat(Array.prototype.slice.call(arguments))\n          );\n    };\n\n    if (this.prototype) {\n      NOOP.prototype = this.prototype;\n    }\n    fnBound.prototype = new NOOP();\n\n    return fnBound;\n  };\n\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create\n  // Production steps of ECMA-262, Edition 5, 15.2.3.5\n  // Reference: http://es5.github.io/#x15.2.3.5\n  var create = Object.create || (function() {\n    function Temp() {}\n    var hasOwn = Object.prototype.hasOwnProperty;\n\n    return function (O) {\n      if (typeof O != 'object') {\n        throw TypeError('Object prototype may only be an Object or null');\n      }\n      Temp.prototype = O;\n      var obj = new Temp();\n      Temp.prototype = null;\n      if (arguments.length > 1) {\n        var Properties = Object(arguments[1]);\n        for (var prop in Properties) {\n          if (hasOwn.call(Properties, prop)) {\n            obj[prop] = Properties[prop];\n          }\n        }\n      }\n      return obj;\n    };\n  })();\n\n  var HTML_METER_ELEMENT_CONSTRICTOR_NAME = [\n    'HTML',\n    METER_TAG.charAt(0).toUpperCase() +\n    METER_TAG.slice(1).toLowerCase() +\n    'Element'\n  ].join('');\n\n  function createNativeFunction(fnName, fn) {\n    function toString() {\n      return 'function ' + fnName + '() { [native code] }';\n    }\n\n    var nativeToString = toString.toString.toString;\n\n    // firfox shows bound toString in console not bug\n    // ie7/8 is buggy without bind\n    toString.toString = bind.call(nativeToString, nativeToString);\n    // some browsers shows empty function name in toString.toString.toString\n    toString.toString.toString = toString.toString;\n\n    fn.toString = toString;\n    return fn;\n  }\n\n  // ie 8 document.createElement is not a function\n  // ie 7 document.createElement.apply is undefined\n  var createElement = (function(createElement) {\n    if (createElement.apply) {\n      return function() {\n        return createElement.apply(document, arguments);\n      };\n    } else {\n      return function(tagName, options) {\n        return createElement(tagName, options);\n      };\n    }\n  })(document[METHOD_CREATE_ELEMENT]);\n\n  var HTMLMeterElement = window[HTML_METER_ELEMENT_CONSTRICTOR_NAME] || (function() {\n    var HTMLMeterElement = createNativeFunction(HTML_METER_ELEMENT_CONSTRICTOR_NAME, function() {\n      if(isFirefox) {\n        throw new TypeError('Illegal constructor.');\n      } else {\n        throw new TypeError('Illegal constructor');\n      }\n    });\n\n    // ie 8 constructor is null\n    var prototype = (\n      window.HTMLElement ||\n      meterElement.constructor ||\n      window.Element ||\n      window.Node ||\n      NOOP).prototype;\n\n    prototype = create(prototype);\n\n    HTMLMeterElement.prototype = prototype;\n    HTMLMeterElement.prototype.constructor = HTMLMeterElement;\n\n    return window[HTML_METER_ELEMENT_CONSTRICTOR_NAME] = HTMLMeterElement;\n  })();\n\n  // there is no moz/ms/o vendor prefix\n  var MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n  var isObservered = false;\n  var isReady = false;\n\n  meterElement[METER_TAG] = METER_TAG; // for attersAsProps test\n  var supports = {\n    MutationObserver: !!MutationObserver,\n    addEventListener: !!window.addEventListener,\n    attachEvent: !!window.attachEvent,\n    attersAsProps: meterElement.getAttribute(METER_TAG) === METER_TAG, // (IE8- bug)\n    unknownElement: !!meterElement.constructor,\n    hasAttribute: !!meterElement.hasAttribute,\n    propertychange: 'onpropertychange' in document\n  };\n\n  function on(el, events, listener, useCapture) {\n    if (!el) {\n      return;\n    }\n    each(events.split(' '), function(event) {\n      if (supports.addEventListener) {\n        el.addEventListener(event, listener, !!useCapture);\n      } else if (supports.attachEvent) {\n        el.attachEvent('on' + event, listener);\n      } else {\n        el['on' + event] = listener;\n      }\n    });\n  }\n\n  if (!supports.MutationObserver) {\n    var supportsDOMNodeInserted = false;\n    var supportsDOMAttrModified = false;\n    var testDiv = createElement('div');\n    var testChild = createElement('div');\n    on(testDiv, 'DOMNodeInserted', function() {\n      supportsDOMNodeInserted = true;\n    });\n    testDiv.appendChild(testChild);\n    on(testDiv, 'DOMAttrModified', function() {\n      supportsDOMAttrModified = true;\n    });\n    testDiv.setAttribute(PROP_MIN, 1);\n    testChild = null;\n    testDiv = null;\n\n    supports.DOMNodeInserted = supportsDOMNodeInserted;\n    supports.DOMAttrModified = supportsDOMAttrModified;\n  }\n\n  var METER_SHADOW_HTML = [\n    '<div class=\"' + METER_VALUE_CLASSES.inner + '\">',\n      '<div class=\"' + METER_VALUE_CLASSES.bar + '\">',\n        '<div class=\"' + METER_VALUE_CLASSES[LEVEL_SUBOPTIMUM] + '\" style=\"width: 0\">',\n        '</div>',\n      '</div>',\n    '</div>'\n  ].join('');\n\n  var setTimeout = window.setTimeout;\n\n  function hasAttribute(el, name) {\n    if (supports.hasAttribute) {\n      return el.hasAttribute(name);\n    } else {\n      return el.getAttribute(name) !== null;\n    }\n  }\n\n  function updateMeterStyle(meter) {\n    var level = calcLevel(meter);\n\n    try {\n      var valueElement = meter.getElementsByTagName('div')[2];\n      valueElement.className = level.className;\n      valueElement.style.width = level.percentage + '%';\n    } catch (_) {}\n\n    return meter;\n  }\n\n  // over write document.createElement\n  document[METHOD_CREATE_ELEMENT] = createNativeFunction(METHOD_CREATE_ELEMENT, function() {\n    var el = createElement.apply(document, arguments);\n    if (isMeter(el)) {\n      polyfill(el);\n    }\n    return el;\n  });\n\n  function observerSubtree() {\n    if (isObservered) {\n      return;\n    }\n\n    // observe subtree\n    if (supports.MutationObserver) {\n      var observer = new MutationObserver(function(mutations) {\n        each(mutations, function(mutation) {\n          polyfill(mutation.target);\n        });\n      });\n\n      observer.observe(documentElement, {\n        subtree: true,\n        childList: true\n      });\n    } else if (supports.DOMNodeInserted) {\n      on(documentElement, 'DOMNodeInserted', function(e) {\n        polyfill(e.target);\n      });\n    } else {\n      // any idea ?\n    }\n    isObservered = true;\n  }\n\n  function polyfill(context) {\n    var meters = [];\n    if (isMeter(context)) {\n      meters = [context];\n    } else {\n      meters = (context || document).getElementsByTagName(METER_TAG);\n    }\n\n    each(meters, function(meter) {\n      if (meter[POLYFILL_FLAG]) {\n        return;\n      }\n\n      if (!hasAttribute(meter, POLYFILL_FLAG)) {\n        // ie 8 throws\n        try {\n          meter.constructor = HTMLMeterElement;\n        } catch (_) {}\n\n        // ie8 need clone meter might be a new node\n        meter = createShadowDom(meter);\n        defineEtter(meter);\n        observerAttr(meter);\n\n        meter.setAttribute(POLYFILL_FLAG, VERSION);\n      }\n\n      updateMeterStyle(meter);\n      meter[POLYFILL_FLAG] = VERSION;\n    });\n  }\n\n  function observerAttr(meter) {\n    // observe subtree\n    if (supports.MutationObserver) {\n      var observer = new MutationObserver(function(mutations) {\n        each(mutations, function(mutation) {\n          updateMeterStyle(mutation.target);\n        });\n      });\n      observer.observe(meter, {\n        attributes: true,\n        attributeFilter: METER_PROPS\n      });\n    } else if (supports.DOMAttrModified) {\n      on(meter, 'DOMAttrModified', function(e) {\n        if (METER_PROPS.join(' ').indexOf(e.attrName) > -1) {\n          updateMeterStyle(e.target);\n        }\n      });\n    } else if (supports.propertychange) {\n      on(meter, 'propertychange', function(e) {\n        if (METER_PROPS.join(' ').indexOf(e.propertyName) > -1) {\n          updateMeterStyle(e.srcElement);\n        }\n      });\n    } else {\n      // anything ?\n    }\n  }\n\n  function createShadowDom(meter) {\n    if (meter.canHaveChildren === false || meter.canHaveHTML === false) {\n      // ie 8 fails on innerHTML meter\n      var parent = meter.parentNode;\n      if (parent) {\n        var meterClone = createElement(METER_TAG);\n        each(METER_PROPS, function(prop) {\n          var value = meter[prop];\n          if (!isVoidValue(value)) {\n            meterClone[prop] = meter[prop];\n          }\n        });\n        parent.replaceChild(meterClone, meter);\n        meterClone.innerHTML = METER_SHADOW_HTML;\n        meter = meterClone;\n\n        // remove </meter><//meter>\n        var slashMeters = parent.getElementsByTagName('/' + METER_TAG);\n        each(slashMeters, function(slashMeter) {\n          parent.removeChild(slashMeter);\n        });\n\n        // anotherway remove </meter><//meter>\n        // var next = meter;\n        // while (next = next.nextSibling) {\n        //   if (next.tagName.toUpperCase() === '/' + METER_TAG) {\n        //     parent.removeChild(next);\n        //   }\n        // }\n      }\n    } else {\n      meter.innerHTML = METER_SHADOW_HTML;\n    }\n    return meter;\n  }\n\n  function defineEtter(meter) {\n    var METHOD_SET_ATTRIBUTE = 'setAttribute';\n    var METHOD_CLONE_NODE = 'cloneNode';\n    var propValues = {};\n    var setAttribute = bind.call(meter[METHOD_SET_ATTRIBUTE], meter);\n    var cloneNode = bind.call(meter[METHOD_CLONE_NODE], meter);\n\n    each(METER_PROPS, function(prop) {\n      propValues[prop] = meter.getAttribute(prop);\n    });\n\n    propValues = fixProps(propValues);\n\n    function getGetter(prop) {\n      return function() {\n        return getPropValue(propValues, prop);\n      };\n    }\n\n    function getSetter(prop) {\n      return function(value) {\n        if (isVoidValue(value)) {\n          if (isFirefox) {\n            throw new TypeError('Value being assigned to ' + HTML_METER_ELEMENT_CONSTRICTOR_NAME + '.' + prop + ' is not a finite floating-point value.');\n          } else {\n            throw new TypeError('Failed to set the \\'' + prop + '\\' property on \\'' + HTML_METER_ELEMENT_CONSTRICTOR_NAME + '\\': The provided double value is non-finite.');\n          }\n        }\n\n        value = isNull(value) ? 0 : parseFloat(value);\n\n        setAttribute(prop, value);\n        propValues[prop] = value;\n        updateMeterStyle(meter);\n        return value;\n      };\n    }\n\n    if (!supports.attersAsProps) {\n      each(METER_PROPS, function(prop) {\n        defineProperty(meter, prop, {\n          get: getGetter(prop),\n          set: getSetter(prop)\n        });\n      });\n    }\n\n    var attributeSetter = createNativeFunction(METHOD_SET_ATTRIBUTE, function(attr, value) {\n      setAttribute(attr, value);\n      attr = attr.toLowerCase();\n      each(METER_PROPS, function(prop) {\n        if (prop === attr) {\n          propValues[prop] = isVoidValue(value) || isNull(value) ? null : parseFloat(value);\n          updateMeterStyle(meter);\n        }\n      });\n    });\n\n    defineProperty(meter, METHOD_SET_ATTRIBUTE, {\n      value: attributeSetter\n    });\n\n    var cloneNodeMethd = createNativeFunction(METHOD_CLONE_NODE, function(deep) {\n      var clone = cloneNode(false);\n      clone.removeAttribute(POLYFILL_FLAG);\n      polyfill(clone);\n      return clone;\n    });\n\n    defineProperty(meter, METHOD_CLONE_NODE, {\n      value: cloneNodeMethd\n    });\n  }\n\n  (function checkReady() {\n\n    function completed() {\n      if (document.readyState === 'complete') {\n        isReady = true;\n      }\n    }\n    completed();\n\n    on(document, 'DOMContentLoaded', function() {\n      isReady = true;\n    });\n\n    on(window, 'load', function() {\n      isReady = true;\n    });\n\n    on(document, 'readystatechange', completed);\n\n    // uglify will break window without a wrapper\n    var isTop = false;\n    try {\n      isTop = isNull(window.frameElement);\n    } catch (_) {}\n\n    if (!supports.addEventListener && documentElement.doScroll && isTop) {\n      (function doScroll() {\n        try {\n          documentElement.doScroll();\n          isReady = true;\n        } catch (_) {\n          return setTimeout(doScroll, 50);\n        }\n      })();\n    }\n  })();\n\n  (function polyfillWhenReady() {\n    if (isReady) {\n      polyfill();\n      observerSubtree();\n    } else {\n      setTimeout(polyfillWhenReady, 50);\n    }\n  })();\n\n  meterPolyfill.polyfill = polyfill;\n  return meterPolyfill;\n});\n"]}