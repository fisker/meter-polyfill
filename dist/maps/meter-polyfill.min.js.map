{"version":3,"sources":["meter-polyfill.min.js"],"names":["root","factory","define","amd","module","exports","meterPolyfill","this","window","throwError","msg","constructor","Error","lessThan","value","high","greaterThan","low","nearest","each","arrLike","fn","i","len","PROP_LENGTH","TRUE","isUndefined","obj","isNull","NULL","isValidValue","isNaN","isFinite","parseValue","valueForNull","parseFloat","assignValues","target","source","METER_PROPS","prop","getPropValue","propValues","isNullValue","min","max","PROP_MIN","METER_INITAL_VALUES","PROP_MAX","PROP_LOW","PROP_HIGH","PROP_OPTIMUM","PROP_VALUE","meterCalculator","meter","optimum","percentage","level","LEVEL_OPTIMUM","LEVEL_SUBOPTIMUM","LEVEL_SUBSUBOPTIMUM","isFirefox","className","METER_VALUE_CLASSES","document","navigator","userAgent","indexOf","METER_TAG_NAME","VERSION","METHOD_TO_UPPER_CASE","METHOD_TO_LOWER_CASE","NOOP","FALSE","METER_CLASS_PREFIX","PROP_LABELS","METHOD_CREATE_ELEMENT","meterElement","nativeSupport","throwTypeError","TypeError","isElement","el","tagName","PROP_TAGNAME","createNativeFunction","fnName","toString","METHOD_TO_STRING","nativeToString","on","events","listener","useCapture","split","event","SUPPORTS_ADD_EVENT_LISTENER","METHOD_ADD_EVENT_LISTENER","SUPPORTS_ATTACH_EVENT","METHOD_ATTACH_EVENT","hasAttribute","name","SUPPORTS_HAS_ATTRIBUTE","METHOD_HAS_ATTRIBUTE","METHOD_GET_ATTRIBUTE","walkContext","context","METHOD_GET_ELEMENTS_BY_TAG_NAME","observerAttributes","attrs","callback","SUPPORTS_MUTATION_OBSERVER","MutationObserver","mutations","mutation","atrr","attributeName","observe","attributes","attributeFilter","SUPPORTS_DOM_ATTR_MODIFIED","METHOD_DOM_ATTR_MODIFIED","e","attr","attrName","includes","METHOD_CALL","SUPPORTS_PROPERTYCHANGE","PROP_PROPERTY_NAME","PROP_FOR","ATTR_FOR","polyfillMeter","allMeters","POLYFILL_FLAG","createShadowDom","defineMeterProperties","METER_ATTRS","triggerAttrChange","updateMeterStyle","result","PROP_CLASS_NAME","PROP_STYLE","PROP_WIDTH","valueElement","PROP_FIRST_CHILD","currentClassName","currentWidth","changeClassName","changeWidth","PROP_ID","assignLables","canHaveChildren","canHaveHTML","parent","parentNode","meterClone","createElement","replaceChild","slashMeters","slashMeter","METHOD_REMOVE_CHILD","innerHTML","METER_SHADOW_HTML","getGetter","getSetter","errorMessage","HTML_METER_ELEMENT_CONSTRICTOR_NAME","METHOD_SET_ATTRIBUTE","properties","SUPPORTS_ATTERS_AS_PROPS","get","set","writeable","setAttribute","bind","methodSetAttribute","enumerable","removeAttribute","METHOD_REMOVE_ATTRIBUTE","methodRemoveAttribute","METHOD_CLONE_NODE","cloneNode","methodCloneNode","deep","clone","PROP_CONSTRUCTOR","HTMLMeterElement","hasOwnProperty","defineProperty","PROP_PROTO","prototype","getMeterLables","assignedLables","allLabels","label","propFor","propId","control","labels","observerLabels","LABEL_TAG_NAME","observedLables","LABEL_ATTRS","push","observerDocument","PROP_TARGET","documentElement","subtree","childList","SUPPORTS_DOM_NODE_INSERTED","METHOD_DOM_NODE_INSERTED","setInterval","TIMEOUT_FREQUENCY","SUPPORTS_DOM_NODE_REMOVED","METHOD_DOM_NODE_REMOVED","setTimeout","index","splice","METHOD_APPEND_CHILD","PROP_PROTOTYPE","METHOD_APPLY","METHOD_CONCAT","METHOD_SLICE","DIV_TAG_NAME","DIV_OPENING_TAG","DIV_CLOSING_TAG","oObject","Object","arrayPrototype","Array","functionPrototype","Function","objectPrototype","objectDefineProperty","o","property","descriptor","PROP_ENUMERABLE","PROP_CONFIGURABLE","number","METHOD_DEFINE_SETTER","METHOD_DEFINE_GETTER","SUPPORTS_DEFINE_SETTER","PROP_GET","PROP_SET","create","proto","v","oThis","slice","args","arguments","fnToBind","charAt","options","htmlElementPrototype","HTMLElement","Element","Node","WebKitMutationObserver","testDiv","testChild","join","setReady","isReady","completed","readyState","isTop","frameElement","_","doScroll","polyfillWhenReady","version","support","CLASSES","calc"],"mappings":"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","file":"../meter-polyfill.min.js","sourcesContent":["/* globals define: true, module: true*/\n(function(root, factory) {\n  'use strict';\n\n  if (typeof define === 'function' && define.amd) {\n    define(factory(root));\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory(root);\n  } else {\n    root.meterPolyfill = factory(root);\n  }\n})(this, function(window) {\n  'use strict';\n\n  var document = window.document;\n\n  function throwError(msg, constructor) {\n    throw new (constructor || Error)(msg);\n  }\n\n  if (!document) {\n    throwError('meter-polyfill requires a window with a document.');\n  }\n\n  var isFirefox = window.navigator.userAgent.indexOf('Firefox') > -1;\n\n  var METER_TAG_NAME = 'METER';\n  var VERSION = '1.5.0';\n\n  var METHOD_TO_UPPER_CASE = 'toUpperCase';\n  var METHOD_TO_LOWER_CASE = 'toLowerCase';\n\n\n  var NOOP = function() {};\n  var TRUE = true;\n  var FALSE = false;\n  var NULL = null;\n\n  var LEVEL_OPTIMUM = 1;\n  var LEVEL_SUBOPTIMUM = 2;\n  var LEVEL_SUBSUBOPTIMUM = 3;\n\n  var METER_CLASS_PREFIX = METER_TAG_NAME[METHOD_TO_LOWER_CASE]() + '-';\n  var METER_VALUE_CLASSES = {};\n  METER_VALUE_CLASSES[LEVEL_OPTIMUM] = METER_CLASS_PREFIX + 'optimum-value';\n  METER_VALUE_CLASSES[LEVEL_SUBOPTIMUM] = METER_CLASS_PREFIX + 'suboptimum-value';\n  METER_VALUE_CLASSES[LEVEL_SUBSUBOPTIMUM] = METER_CLASS_PREFIX + 'even-less-good-value';\n\n  var PROP_MIN = 'min';\n  var PROP_MAX = 'max';\n  var PROP_LOW = 'low';\n  var PROP_HIGH = 'high';\n  var PROP_VALUE = 'value';\n  var PROP_OPTIMUM = 'optimum';\n  var PROP_LABELS = 'labels';\n\n  var METER_PROPS = [PROP_MIN, PROP_MAX, PROP_LOW, PROP_HIGH, PROP_OPTIMUM, PROP_VALUE];\n\n  var METER_INITAL_VALUES = {\n    min: 0,\n    max: 1,\n    value: 0\n  };\n\n  // var PRECISION = isFirefox ? 16 : 6; // firefox and chrome use different precision\n\n  var PROP_LENGTH = 'length';\n  var METHOD_CREATE_ELEMENT = 'createElement';\n\n  var meterElement = document[METHOD_CREATE_ELEMENT](METER_TAG_NAME);\n  var nativeSupport = meterElement[PROP_MAX] === METER_INITAL_VALUES[PROP_MAX];\n\n  function lessThan(value, high) {\n    if (value > high) {\n      value = high;\n    }\n    return value;\n  }\n\n  function greaterThan(value, low) {\n    if (value < low) {\n      value = low;\n    }\n    return value;\n  }\n\n  function nearest(value, low, high) {\n    if (value < low) {\n      value = low;\n    }\n\n    if (value > high) {\n      value = high;\n    }\n\n    return value;\n  }\n\n  function each(arrLike, fn) {\n    var i = 0;\n    var len = arrLike[PROP_LENGTH];\n    for (; i < len; i++) {\n      if (fn(arrLike[i], i) === TRUE) {\n        break;\n      }\n    }\n  }\n\n  function isUndefined(obj) {\n    return typeof obj === 'undefined';\n  }\n\n  function isNull(obj) {\n    return obj === NULL;\n  }\n\n  function isValidValue(obj) {\n    return isNull(obj) || (!isNaN(obj) && isFinite(obj));\n  }\n\n  function parseValue(value, valueForNull) {\n    if (isUndefined(valueForNull)) {\n      valueForNull = NULL;\n    }\n    return !isValidValue(value) || isNull(value) ?\n      valueForNull :\n      parseFloat(value);\n  }\n\n  function assignValues(target, source) {\n    each(METER_PROPS, function(prop) {\n      target[prop] = parseValue(source[prop]);\n    });\n    return target;\n  }\n\n  function getPropValue(propValues, prop) {\n    var value = propValues[prop];\n    var isNullValue = isNull(value);\n    var min;\n    var max;\n    switch (prop) {\n      case PROP_MIN:\n        value = isNullValue ?\n          METER_INITAL_VALUES[PROP_MIN] :\n          value;\n        break;\n\n      case PROP_MAX:\n        value = isNullValue ?\n          METER_INITAL_VALUES[PROP_MAX] :\n          value;\n        min = getPropValue(propValues, PROP_MIN);\n        value = greaterThan(value, min);\n        break;\n\n      case PROP_LOW:\n        min = getPropValue(propValues, PROP_MIN);\n        value = isNullValue ?\n          min :\n          nearest(value, min, getPropValue(propValues, PROP_MAX));\n        break;\n\n      case PROP_HIGH:\n        max = getPropValue(propValues, PROP_MAX);\n        value = isNullValue ?\n          max :\n          nearest(value, getPropValue(propValues, PROP_LOW), max);\n        break;\n\n      case PROP_OPTIMUM:\n        min = getPropValue(propValues, PROP_MIN);\n        max = getPropValue(propValues, PROP_MAX);\n        value = isNullValue ?\n          (max - min) / 2 + min :\n          nearest(value, min, max);\n        break;\n\n      case PROP_VALUE:\n        value = isNullValue ?\n          METER_INITAL_VALUES[PROP_VALUE] :\n          value;\n        min = getPropValue(propValues, PROP_MIN);\n        max = getPropValue(propValues, PROP_MAX);\n        value = nearest(value, min, max);\n        break;\n\n      default:\n        break;\n    }\n    return value;\n  }\n\n  function meterCalculator(meter) {\n    var propValues = assignValues({}, meter);\n\n    var min = getPropValue(propValues, PROP_MIN);\n    var max = getPropValue(propValues, PROP_MAX);\n    var low = getPropValue(propValues, PROP_LOW);\n    var high = getPropValue(propValues, PROP_HIGH);\n    var optimum = getPropValue(propValues, PROP_OPTIMUM);\n    var value = getPropValue(propValues, PROP_VALUE);\n\n    var percentage = min === max ? 0 : (value - min) / (max - min) * 100;\n    var level = LEVEL_OPTIMUM;\n\n    if (\n      high === max ||\n      low === min ||\n      (optimum >= low && optimum <= high)\n    ) {\n      if (\n        (low <= optimum && value < low) ||\n        (low > optimum && value > low) ||\n        (high < optimum && value < high) ||\n        (high >= optimum && value > high)\n      ) {\n        level = LEVEL_SUBOPTIMUM;\n      }\n    } else if (low === high) {\n      if (\n        (low <= optimum && value < low) ||\n        (high > optimum && value > high)\n      ) {\n        level = LEVEL_SUBSUBOPTIMUM;\n      }\n    } else if (optimum < low) {\n      if (value > low && value <= high) {\n        level = LEVEL_SUBOPTIMUM;\n      } else if (value > high) {\n        level = LEVEL_SUBSUBOPTIMUM;\n      }\n    } else if (optimum > high) {\n      if (value >= low && value < high) {\n        level = LEVEL_SUBOPTIMUM;\n      } else if (value < low) {\n        level = LEVEL_SUBSUBOPTIMUM;\n      }\n    }\n\n    // firefox show diffently from chrome\n    // when value === high/low or min === max\n    if (isFirefox) {\n      if (min === max) {\n        percentage = 100;\n      }\n\n      if (\n          (optimum > high && value === high) ||\n          (optimum < low && value === low)\n       ) {\n        level = LEVEL_SUBOPTIMUM;\n      }\n    }\n\n    return {\n      min: min,\n      max: max,\n      low: low,\n      high: high,\n      optimum: optimum,\n      value: value,\n      percentage: percentage,\n      level: level,\n      className: METER_VALUE_CLASSES[level]\n    };\n  }\n\n  var meterPolyfill = nativeSupport ? NOOP : (function(){\n    /* polyfill starts */\n\n    var POLYFILL_FLAG = '_polyfill';\n\n    var METHOD_REMOVE_CHILD = 'removeChild';\n    var METHOD_SET_ATTRIBUTE = 'setAttribute';\n    var METHOD_HAS_ATTRIBUTE = 'hasAttribute';\n    var METHOD_GET_ATTRIBUTE = 'getAttribute';\n    var METHOD_REMOVE_ATTRIBUTE = 'removeAttribute';\n    var METHOD_APPEND_CHILD = 'appendChild';\n    var METHOD_ADD_EVENT_LISTENER = 'addEventListener';\n    var METHOD_ATTACH_EVENT = 'attachEvent';\n    var METHOD_GET_ELEMENTS_BY_TAG_NAME = 'getElementsByTagName';\n    var PROP_FIRST_CHILD = 'firstChild';\n\n    var PROP_PROTOTYPE = 'prototype';\n    var PROP_CONSTRUCTOR = 'constructor';\n    var PROP_PROTO = '__proto__';\n\n    var METHOD_CALL = 'call';\n    var METHOD_APPLY = 'apply';\n    var METHOD_CONCAT = 'concat';\n    var METHOD_SLICE = 'slice';\n\n    var DIV_TAG_NAME = 'DIV';\n    var LABEL_TAG_NAME = 'LABEL';\n    var DIV_OPENING_TAG = '<div class=\"';\n    var DIV_CLOSING_TAG = '</div>';\n\n    var TIMEOUT_FREQUENCY = 10;\n\n    var PROP_ID = 'id';\n    var PROP_FOR = 'htmlFor';\n    var ATTR_FOR = 'for';\n\n    var METER_ATTRS = METER_PROPS[METHOD_CONCAT]([PROP_ID]);\n    var LABEL_ATTRS = [ATTR_FOR];\n\n    var documentElement = document.documentElement;\n    var allLabels = documentElement[METHOD_GET_ELEMENTS_BY_TAG_NAME](LABEL_TAG_NAME);\n    var allMeters = documentElement[METHOD_GET_ELEMENTS_BY_TAG_NAME](METER_TAG_NAME);\n\n    var oObject = Object;\n    var arrayPrototype = Array[PROP_PROTOTYPE];\n    var functionPrototype = Function[PROP_PROTOTYPE];\n    var objectPrototype = oObject[PROP_PROTOTYPE];\n\n    var defineProperty;\n    var objectDefineProperty = oObject.defineProperty;\n    if (objectDefineProperty) {\n      defineProperty = function(o, property, descriptor) {\n        var PROP_ENUMERABLE = 'enumerable';\n        var PROP_CONFIGURABLE = 'configurable';\n        if (descriptor[PROP_ENUMERABLE] !== FALSE) {\n          descriptor[PROP_ENUMERABLE] = TRUE;\n        }\n        descriptor[PROP_CONFIGURABLE] = TRUE;\n\n        try {\n          objectDefineProperty(o, property, descriptor);\n        } catch (e) {\n          if (descriptor[PROP_ENUMERABLE] && e.number === -0x7FF5EC54) {\n            descriptor[PROP_ENUMERABLE] = FALSE;\n            objectDefineProperty(o, property, descriptor);\n          }\n        }\n      };\n    } else {\n      var METHOD_DEFINE_SETTER = '__defineSetter__';\n      var METHOD_DEFINE_GETTER = '__defineGetter__';\n      var SUPPORTS_DEFINE_SETTER = METHOD_DEFINE_SETTER in documentElement;\n      defineProperty = function(o, property, descriptor) {\n        var PROP_GET = 'get';\n        var PROP_SET = 'set';\n        if (SUPPORTS_DEFINE_SETTER) {\n          if (descriptor[PROP_GET]) {\n            o[METHOD_DEFINE_GETTER](property, descriptor[PROP_GET]);\n          }\n          if (descriptor[PROP_SET]) {\n            o[METHOD_DEFINE_SETTER](property, descriptor[PROP_SET]);\n          }\n        } else {\n          if (descriptor[PROP_GET]) {\n            o[property] = descriptor[PROP_GET][METHOD_CALL](o);\n          }\n        }\n\n        if (descriptor[PROP_VALUE]) {\n          o[property] = descriptor[PROP_VALUE];\n        }\n      };\n    }\n\n    var create = oObject.create || function(proto) {\n      // simple but enough\n      NOOP[PROP_PROTOTYPE] = proto;\n      return new NOOP();\n    };\n\n    var includes = arrayPrototype.includes || function(v) {\n      var i = this[PROP_LENGTH];\n      while (i--) {\n        if (this[i] === v) {\n          return TRUE;\n        }\n      }\n      return FALSE;\n    };\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\n    var bind = functionPrototype.bind || function(oThis) {\n      var slice = arrayPrototype[METHOD_SLICE];\n      var args = slice[METHOD_CALL](arguments, 1);\n      var fnToBind = this;\n      return function() {\n        return fnToBind[METHOD_APPLY](\n          oThis,\n          args[METHOD_CONCAT](slice[METHOD_CALL](arguments))\n        );\n      };\n    };\n\n    function throwTypeError(msg) {\n      throwError(msg, TypeError);\n    }\n\n    function isElement(el, tagName) {\n      var PROP_TAGNAME = 'tagName';\n      return el && el[PROP_TAGNAME] && el[PROP_TAGNAME][METHOD_TO_UPPER_CASE]() === tagName;\n    }\n\n    var HTML_METER_ELEMENT_CONSTRICTOR_NAME = 'HTML' +\n      METER_TAG_NAME.charAt(0)[METHOD_TO_UPPER_CASE]() +\n      METER_TAG_NAME[METHOD_SLICE](1)[METHOD_TO_LOWER_CASE]() +\n      'Element';\n\n    // ie 8 document.createElement is not a function\n    // ie 7 document.createElement.apply is undefined\n    var createElement = (function(createElement) {\n      return function(tagName, options) {\n        return createElement[METHOD_APPLY] ?\n          createElement[METHOD_APPLY](document, arguments) :\n          createElement(tagName, options);\n      };\n    })(document[METHOD_CREATE_ELEMENT]);\n\n\n    var METHOD_TO_STRING = 'toString';\n    var nativeToString = oObject[METHOD_TO_STRING];\n    nativeToString = bind[METHOD_CALL](nativeToString, nativeToString);\n    nativeToString[METHOD_TO_STRING] = nativeToString;\n\n    function createNativeFunction(fnName, fn) {\n      function toString() {\n        return 'function ' + fnName + '() { [native code] }';\n      }\n\n      toString[METHOD_TO_STRING] = nativeToString;\n\n      fn[METHOD_TO_STRING] = toString;\n      return fn;\n    }\n\n    var HTMLMeterElement = window[HTML_METER_ELEMENT_CONSTRICTOR_NAME] ||\n      (window[HTML_METER_ELEMENT_CONSTRICTOR_NAME] = (function() {\n        var HTMLMeterElement = createNativeFunction(HTML_METER_ELEMENT_CONSTRICTOR_NAME, function() {\n          throwTypeError('Illegal ' + PROP_CONSTRUCTOR + '' + (isFirefox ? '.' : ''));\n        });\n\n        var htmlElementPrototype = create((window.HTMLElement ||\n          meterElement[PROP_CONSTRUCTOR] ||\n          window.Element ||\n          window.Node ||\n          NOOP)[PROP_PROTOTYPE]);\n\n        defineProperty(htmlElementPrototype, PROP_CONSTRUCTOR, {\n          enumerable: FALSE,\n          value: HTMLMeterElement\n        });\n\n        HTMLMeterElement[PROP_PROTOTYPE] = htmlElementPrototype;\n        HTMLMeterElement[PROP_PROTO] = htmlElementPrototype;\n\n        return HTMLMeterElement;\n      })());\n\n    // there is no moz/ms/o vendor prefix\n    var MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\n    meterElement[METER_TAG_NAME] = METER_TAG_NAME; // for attersAsProps test\n\n    var SUPPORTS_MUTATION_OBSERVER = !!MutationObserver;\n    var SUPPORTS_ADD_EVENT_LISTENER = !!window[METHOD_ADD_EVENT_LISTENER];\n    var SUPPORTS_ATTACH_EVENT = !!window[METHOD_ATTACH_EVENT];\n    var SUPPORTS_ATTERS_AS_PROPS = meterElement[METHOD_GET_ATTRIBUTE](METER_TAG_NAME) === METER_TAG_NAME; // (IE8- bug)\n    var SUPPORTS_HAS_ATTRIBUTE = !!meterElement[METHOD_HAS_ATTRIBUTE];\n    var SUPPORTS_PROPERTYCHANGE = 'onpropertychange' in document;\n    var SUPPORTS_DOM_NODE_INSERTED = FALSE;\n    var SUPPORTS_DOM_ATTR_MODIFIED = FALSE;\n    var SUPPORTS_DOM_NODE_REMOVED = FALSE;\n\n\n    var METHOD_DOM_NODE_INSERTED = 'DOMNodeInserted';\n    var METHOD_DOM_ATTR_MODIFIED = 'DOMAttrModified';\n    var METHOD_DOM_NODE_REMOVED = 'DOMNodeRemoved';\n    if (!SUPPORTS_MUTATION_OBSERVER) {\n      var testDiv = createElement(DIV_TAG_NAME);\n      var testChild = createElement(DIV_TAG_NAME);\n\n      on(testDiv, METHOD_DOM_NODE_INSERTED, function() {\n        SUPPORTS_DOM_NODE_INSERTED = TRUE;\n      });\n      on(testDiv, METHOD_DOM_ATTR_MODIFIED, function() {\n        SUPPORTS_DOM_ATTR_MODIFIED = TRUE;\n      });\n      on(testDiv, METHOD_DOM_NODE_REMOVED, function() {\n        SUPPORTS_DOM_NODE_REMOVED = TRUE;\n      });\n\n      testDiv[METHOD_APPEND_CHILD](testChild);\n      testDiv[METHOD_SET_ATTRIBUTE](PROP_MIN, 1);\n\n      documentElement[METHOD_APPEND_CHILD](testDiv);\n      testDiv[METHOD_REMOVE_CHILD](testChild);\n      documentElement[METHOD_REMOVE_CHILD](testDiv);\n\n      testDiv = testChild = NULL;\n    }\n\n    function on(el, events, listener, useCapture) {\n      each(events.split(' '), function(event) {\n        if (SUPPORTS_ADD_EVENT_LISTENER) {\n          el[METHOD_ADD_EVENT_LISTENER](event, listener, !!useCapture);\n        } else if (SUPPORTS_ATTACH_EVENT) {\n          el[METHOD_ATTACH_EVENT]('on' + event, listener);\n        } else {\n          el['on' + event] = listener;\n        }\n      });\n    }\n\n    var METER_SHADOW_HTML = [\n      DIV_OPENING_TAG + METER_CLASS_PREFIX + 'inner-element\">',\n        DIV_OPENING_TAG + METER_CLASS_PREFIX + 'bar\">',\n          DIV_OPENING_TAG + METER_VALUE_CLASSES[LEVEL_SUBOPTIMUM] + '\" style=\"width: 0%\">',\n          DIV_CLOSING_TAG,\n        DIV_CLOSING_TAG,\n      DIV_CLOSING_TAG\n    ].join('');\n\n    var setTimeout = window.setTimeout;\n    var setInterval = window.setInterval;\n\n    function hasAttribute(el, name) {\n      return SUPPORTS_HAS_ATTRIBUTE ?\n        el[METHOD_HAS_ATTRIBUTE](name) :\n        !isNull(el[METHOD_GET_ATTRIBUTE](name));\n    }\n\n    function walkContext(context, tagName, fn) {\n      context = context[PROP_LENGTH] ? context : context[METHOD_GET_ELEMENTS_BY_TAG_NAME](tagName);\n      each(context, function(context) {\n        fn(context);\n      });\n    }\n\n    function observerAttributes(el, attrs, callback) {\n      if (SUPPORTS_MUTATION_OBSERVER) {\n        new MutationObserver(function(mutations) {\n          each(mutations, function(mutation) {\n            var atrr = mutation.attributeName[METHOD_TO_LOWER_CASE]();\n            callback(atrr);\n          });\n        })\n        .observe(el, {\n          attributes: TRUE,\n          attributeFilter: attrs\n        });\n      } else if (SUPPORTS_DOM_ATTR_MODIFIED) {\n        on(el, METHOD_DOM_ATTR_MODIFIED, function(e) {\n          var attr = e.attrName[METHOD_TO_LOWER_CASE]();\n          if (includes[METHOD_CALL](attrs, attr)) {\n            callback(attr);\n          }\n        });\n      } else if (SUPPORTS_PROPERTYCHANGE) {\n        on(el, 'propertychange', function(e) {\n          var PROP_PROPERTY_NAME = 'propertyName';\n          // ie < 8 htmlFor\n          var prop = e[PROP_PROPERTY_NAME] === PROP_FOR ?\n            ATTR_FOR :\n            e[PROP_PROPERTY_NAME][METHOD_TO_LOWER_CASE]();\n          if (includes[METHOD_CALL](attrs, prop)) {\n            callback(prop);\n          }\n        });\n      } else {\n        // anything ?\n      }\n    }\n\n    function polyfillMeter(context) {\n      if (!isElement(context, METER_TAG_NAME)) {\n        return walkContext(context || allMeters, METER_TAG_NAME, polyfillMeter);\n      }\n\n      var meter = context;\n      if (!meter[POLYFILL_FLAG]) {\n        // ie8 might need clone meter\n        // so meter might be a new node\n        meter = createShadowDom(meter);\n        defineMeterProperties(meter);\n\n        observerAttributes(meter, METER_ATTRS, function(attr) {\n          triggerAttrChange(meter, attr);\n        });\n        updateMeterStyle(meter);\n      }\n\n    }\n\n    function updateMeterStyle(meter) {\n      var result = meterCalculator(meter);\n\n      var PROP_CLASS_NAME = 'className';\n      var PROP_STYLE = 'style';\n      var PROP_WIDTH = 'width';\n\n      var valueElement = meter[PROP_FIRST_CHILD][PROP_FIRST_CHILD][PROP_FIRST_CHILD];\n      var currentClassName = valueElement[PROP_CLASS_NAME];\n      var currentWidth = valueElement[PROP_STYLE][PROP_WIDTH];\n      var changeClassName = result[PROP_CLASS_NAME];\n      var changeWidth = result.percentage + '%';\n      if (currentClassName !== changeClassName) {\n        valueElement[PROP_CLASS_NAME] = changeClassName;\n      }\n      if (currentWidth !== changeWidth) {\n        valueElement[PROP_STYLE][PROP_WIDTH] = changeWidth;\n      }\n      return meter;\n    }\n\n    function triggerAttrChange(meter, attr) {\n      attr = attr[METHOD_TO_LOWER_CASE]();\n      if (attr === PROP_ID) {\n        assignLables(meter);\n      } else if (includes[METHOD_CALL](METER_PROPS, attr)) {\n        updateMeterStyle(meter);\n      }\n    }\n\n    function createShadowDom(meter) {\n      if (meter.canHaveChildren === FALSE || meter.canHaveHTML === FALSE) {\n        // ie 8 fails on innerHTML created meter\n        var parent = meter.parentNode;\n        if (parent) {\n          var meterClone = assignValues(createElement(METER_TAG_NAME), meter);\n          parent.replaceChild(meterClone, meter);\n          meter = meterClone;\n\n          // remove </meter><//meter>\n          var slashMeters = parent[METHOD_GET_ELEMENTS_BY_TAG_NAME]('/' + METER_TAG_NAME);\n          each(slashMeters, function(slashMeter) {\n            parent[METHOD_REMOVE_CHILD](slashMeter);\n          });\n\n          // another way to remove </meter><//meter>\n          // var next = meter;\n          // while (next = next.nextSibling) {\n          //   if (next.tagName[METHOD_TO_UPPER_CASE]() === '/' + METER_TAG_NAME) {\n          //     parent[METHOD_REMOVE_CHILD](next);\n          //   }\n          // }\n        }\n      }\n\n      meter.innerHTML = METER_SHADOW_HTML;\n      return meter;\n    }\n\n    function defineMeterProperties(meter) {\n      var properties = {};\n\n      function getGetter(prop) {\n        return function() {\n          var propValues = {};\n          each(METER_PROPS, function(prop) {\n            propValues[prop] = parseValue(meter[METHOD_GET_ATTRIBUTE](prop));\n          });\n          return getPropValue(propValues, prop);\n        };\n      }\n\n      function getSetter(prop) {\n        return function(value) {\n          if (!isValidValue(value)) {\n            var errorMessage = isFirefox ?\n              'Value being assigned to ' + HTML_METER_ELEMENT_CONSTRICTOR_NAME + '.' + prop + ' is not a finite floating-point value.' :\n              'Failed to set the \\'' + prop + '\\' property on \\'' + HTML_METER_ELEMENT_CONSTRICTOR_NAME + '\\': The provided double value is non-finite.';\n            throwTypeError(errorMessage);\n          }\n\n          meter[METHOD_SET_ATTRIBUTE](prop, '' + parseValue(value, 0));\n          return value;\n        };\n      }\n\n      if (!SUPPORTS_ATTERS_AS_PROPS) {\n        each(METER_PROPS, function(prop) {\n          properties[prop] = {\n            get: getGetter(prop),\n            set: getSetter(prop)\n          };\n        });\n      }\n\n      properties[PROP_LABELS] = {\n        writeable: FALSE,\n        value: []\n      };\n\n      if (!SUPPORTS_ATTERS_AS_PROPS) {\n        var setAttribute = bind[METHOD_CALL](meter[METHOD_SET_ATTRIBUTE], meter);\n\n        var methodSetAttribute = createNativeFunction(METHOD_SET_ATTRIBUTE, function(attr, value) {\n          setAttribute(attr, value);\n          triggerAttrChange(meter, attr);\n        });\n\n        properties[METHOD_SET_ATTRIBUTE] = {\n          enumerable: FALSE,\n          value: methodSetAttribute\n        };\n      }\n\n      if (SUPPORTS_ATTERS_AS_PROPS) {\n        var removeAttribute = bind[METHOD_CALL](meter[METHOD_REMOVE_ATTRIBUTE], meter);\n\n        var methodRemoveAttribute = createNativeFunction(METHOD_REMOVE_ATTRIBUTE, function(attr) {\n          removeAttribute(attr);\n          triggerAttrChange(meter, attr);\n        });\n\n        properties[METHOD_REMOVE_ATTRIBUTE] = {\n          enumerable: FALSE,\n          value: methodRemoveAttribute\n        };\n      }\n\n      var METHOD_CLONE_NODE = 'cloneNode';\n      var cloneNode = bind[METHOD_CALL](meter[METHOD_CLONE_NODE], meter);\n      var methodCloneNode = createNativeFunction(METHOD_CLONE_NODE, function(deep) {\n        var clone = cloneNode(FALSE);\n        if (SUPPORTS_ATTERS_AS_PROPS) {\n          clone[METHOD_REMOVE_ATTRIBUTE](POLYFILL_FLAG);\n        }\n        polyfillMeter(clone);\n        return clone;\n      });\n\n      properties[METHOD_CLONE_NODE] = {\n        enumerable: FALSE,\n        value: methodCloneNode\n      };\n\n      properties[POLYFILL_FLAG] = {\n        enumerable: FALSE,\n        writeable: FALSE,\n        value: VERSION\n      };\n\n      properties[PROP_CONSTRUCTOR] = {\n        enumerable: FALSE,\n        value: HTMLMeterElement\n      };\n\n      for (var prop in properties) {\n        if (properties.hasOwnProperty(prop)) {\n          defineProperty(meter, prop, properties[prop]);\n        }\n      }\n      meter[PROP_PROTO] = HTMLMeterElement.prototype;\n    }\n\n    function getMeterLables(meter) {\n      var assignedLables = [];\n      var i = 0;\n\n      each(allLabels, function(label) {\n        var propFor = label[PROP_FOR];\n        var propId = meter[PROP_ID];\n\n        if (\n          (label.control === meter) ||\n          (!propFor && label[METHOD_GET_ELEMENTS_BY_TAG_NAME](METER_TAG_NAME)[0] === meter) ||\n          (propFor && propFor === propId)\n          ) {\n          assignedLables[i++] = label;\n        }\n      });\n\n      return assignedLables;\n    }\n\n    function assignLables(context) {\n      if (!isElement(context, METER_TAG_NAME)) {\n        return walkContext(context || allMeters, METER_TAG_NAME, assignLables);\n      }\n\n      var meter = context;\n\n      var labels = getMeterLables(meter);\n      if (meter.labels[PROP_LENGTH] || labels[PROP_LENGTH]) {\n        defineProperty(meter, PROP_LABELS, {\n          writeable: FALSE,\n          value: labels\n        });\n      }\n    }\n\n    var observedLables = [];\n    function observerLabels(context) {\n      if (!isElement(context, LABEL_TAG_NAME)) {\n        return walkContext(context || allLabels, LABEL_TAG_NAME, observerLabels);\n      }\n\n      var label = context;\n      if (!includes[METHOD_CALL](observedLables, label)) {\n        observerAttributes(label, LABEL_ATTRS, function() {\n          assignLables();\n        });\n        observedLables.push(label);\n      }\n    }\n\n    // over write document.createElement\n    document[METHOD_CREATE_ELEMENT] = createNativeFunction(METHOD_CREATE_ELEMENT, function() {\n      var el = createElement[METHOD_APPLY](document, arguments);\n      if (isElement(el, METER_TAG_NAME)) {\n        polyfillMeter(el);\n      }\n      return el;\n    });\n\n    function observerDocument() {\n      var PROP_TARGET = 'target';\n      if (SUPPORTS_MUTATION_OBSERVER) {\n        // observe subtree\n        new MutationObserver(function(mutations) {\n          each(mutations, function(mutation) {\n            var context = mutation[PROP_TARGET];\n            polyfillMeter(context);\n            observerLabels(context);\n          });\n          assignLables();\n        })\n        .observe(documentElement, {\n          subtree: TRUE,\n          childList: TRUE\n        });\n      } else {\n        if (SUPPORTS_DOM_NODE_INSERTED) {\n          on(documentElement, METHOD_DOM_NODE_INSERTED, function(e) {\n            var context = e[PROP_TARGET];\n            polyfillMeter(context);\n            observerLabels(context);\n            assignLables();\n          });\n        } else {\n          setInterval(function() {\n            each(allLabels, function(label) {\n              if (!includes[METHOD_CALL](observedLables, label)) {\n                // new label inserted\n                observerLabels(label);\n                assignLables();\n              }\n            });\n          }, TIMEOUT_FREQUENCY);\n        }\n\n        if (SUPPORTS_DOM_NODE_REMOVED) {\n          on(documentElement, METHOD_DOM_NODE_REMOVED, function(e) {\n            setTimeout(assignLables, TIMEOUT_FREQUENCY);\n          });\n        } else {\n          setInterval(function() {\n            each(observedLables, function(label, index) {\n              if (!includes[METHOD_CALL](allLabels, label)) {\n                // label has been removed\n                observedLables.splice(index, 1);\n                assignLables();\n              }\n            });\n          }, TIMEOUT_FREQUENCY);\n        }\n      }\n\n      assignLables();\n      observerLabels();\n    }\n\n    (function() {\n      var isReady = FALSE;\n\n      function setReady() {\n        isReady = TRUE;\n      }\n\n      function completed() {\n        if (document.readyState === 'complete') {\n          setReady();\n        }\n      }\n\n      try {\n        isTop = isNull(window.frameElement);\n      } catch (_) {}\n\n      if (!SUPPORTS_ADD_EVENT_LISTENER && documentElement.doScroll && isTop) {\n        (function doScroll() {\n          try {\n            documentElement.doScroll();\n            setReady();\n          } catch (_) {\n            setTimeout(doScroll, TIMEOUT_FREQUENCY);\n          }\n        })();\n      }\n\n      on(document, 'DOMContentLoaded', setReady);\n      on(window, 'load', setReady);\n      on(document, 'readystatechange', completed);\n      completed();\n\n      (function polyfillWhenReady() {\n        if (isReady) {\n          polyfillMeter();\n          observerDocument();\n        } else {\n          setTimeout(polyfillWhenReady, TIMEOUT_FREQUENCY);\n        }\n      })();\n    })();\n\n    return polyfillMeter;\n  })();\n\n  meterPolyfill.version = VERSION;\n  meterPolyfill.support = nativeSupport;\n  meterPolyfill.CLASSES = METER_VALUE_CLASSES;\n  meterPolyfill.LEVEL_SUBOPTIMUM = LEVEL_SUBOPTIMUM;\n  meterPolyfill.LEVEL_OPTIMUM = LEVEL_OPTIMUM;\n  meterPolyfill.LEVEL_SUBSUBOPTIMUM = LEVEL_SUBSUBOPTIMUM;\n  meterPolyfill.calc = meterCalculator;\n\n  return meterPolyfill;\n});\n"]}