{"version":3,"sources":["meter-polyfill.min.js"],"names":["root","factory","define","amd","module","exports","meterPolyfill","this","window","between","value","low","high","mathMin","mathMax","isElement","el","tagName","PROP_TAGNAME","METHOD_TO_UPPER_CASE","each","arrLike","fn","i","len","length","isUndefined","obj","isNull","isValidValue","isNaN","isFinite","parseValue","valueForNull","parseFloat","assignValues","target","source","METER_PROPS","prop","getPropValue","propValues","isNullValue","min","max","PROP_MIN","METER_INITAL_VALUES","PROP_MAX","PROP_LOW","PROP_HIGH","PROP_OPTIMUM","PROP_VALUE","meterCalculator","meter","optimum","percentage","level","LEVEL_OPTIMUM","LEVEL_SUBOPTIMUM","LEVEL_SUBSUBOPTIMUM","isFirefox","className","METER_VALUE_CLASSES","METER_TAG_NAME","VERSION","navigator","userAgent","indexOf","NOOP","METHOD_TO_LOWER_CASE","METER_CLASS_PREFIX","PROP_LABELS","METHOD_CREATE_ELEMENT","document","meterElement","nativeSupport","Math","isMeterProp","METHOD_CALL","isMeterAttr","attr","METER_ATTRS","throwTypeError","msg","TypeError","createNativeFunction","fnName","toString","METHOD_TO_STRING","nativeToString","unique","array","uniqueArray","item","call","on","events","listener","useCapture","split","event","SUPPORTS_ADD_EVENT_LISTENER","METHOD_ADD_EVENT_LISTENER","SUPPORTS_ATTACH_EVENT","METHOD_ATTACH_EVENT","hasAttribute","name","SUPPORTS_HAS_ATTRIBUTE","METHOD_HAS_ATTRIBUTE","METHOD_GET_ATTRIBUTE","observerAttributes","attrs","callback","SUPPORTS_MUTATION_OBSERVER","MutationObserver","mutations","mutation","atrr","attributeName","observe","attributes","attributeFilter","SUPPORTS_DOM_ATTR_MODIFIED","METHOD_DOM_ATTR_MODIFIED","e","attrName","SUPPORTS_PROPERTYCHANGE","propertyName","updateMeterStyle","result","valueElement","METHOD_GET_ELEMENTS_BY_TAG_NAME","DIV_TAG_NAME","style","width","_","getMeterLables","assignedLables","labels","label","control","htmlFor","id","labelMeters","polyfill","context","documentElement","meters","POLYFILL_FLAG","createShadowDom","defineMeterProperties","triggerAttrChange","PROP_ID","assignLables","canHaveChildren","canHaveHTML","parent","parentNode","meterClone","createElement","replaceChild","slashMeters","slashMeter","METHOD_REMOVE_CHILD","innerHTML","METER_SHADOW_HTML","getGetter","getSetter","errorMessage","HTML_METER_ELEMENT_CONSTRICTOR_NAME","setAttribute","METHOD_CLONE_NODE","properties","bind","METHOD_SET_ATTRIBUTE","cloneNode","removeAttribute","METHOD_REMOVE_ATTRIBUTE","SUPPORTS_ATTERS_AS_PROPS","get","set","writeable","methodSetAttribute","enumerable","methodRemoveAttribute","methodCloneNode","deep","clone","PROP_CONSTRUCTOR","HTMLMeterElement","hasOwnProperty","defineProperty","PROP_PROTO","prototype","observerLabels","observedLables","LABEL_ATTRS","push","observerDocument","subtree","childList","SUPPORTS_DOM_NODE_INSERTED","METHOD_DOM_NODE_INSERTED","setInterval","TIMEOUT_FREQUENCY","SUPPORTS_DOM_NODE_REMOVED","METHOD_DOM_NODE_REMOVED","setTimeout","index","splice","METHOD_APPEND_CHILD","METHOD_APPLY","PROP_PROTOTYPE","oObject","Object","arrayPrototype","Array","functionPrototype","Function","objectPrototype","LABEL_TAG_NAME","ATTR_FOR","concat","objectDefineProperty","o","property","descriptor","PROP_ENUMERABLE","PROP_CONFIGURABLE","number","METHOD_DEFINE_SETTER","METHOD_DEFINE_GETTER","SUPPORTS_DEFINE_SETTER","PROP_GET","PROP_SET","create","proto","v","oThis","slice","args","arguments","fnToBind","fnBound","charAt","options","htmlElementPrototype","HTMLElement","Element","Node","WebKitMutationObserver","testDiv","testChild","join","setReady","isReady","completed","readyState","isTop","frameElement","doScroll","polyfillWhenReady","version","support","CLASSES","calc"],"mappings":"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","file":"../meter-polyfill.min.js","sourcesContent":["/* globals define: true, module: true*/\n(function(root, factory) {\n  'use strict';\n\n  if (typeof define === 'function' && define.amd) {\n    define(factory(root));\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory(root);\n  } else {\n    root.meterPolyfill = factory(root);\n  }\n})(this, function(window) {\n  'use strict';\n\n  var METER_TAG_NAME = 'METER';\n  var VERSION = '1.5.0';\n\n  var isFirefox = window.navigator.userAgent.indexOf('Firefox') > -1;\n\n  var NOOP = function() {};\n\n  var LEVEL_OPTIMUM = 1;\n  var LEVEL_SUBOPTIMUM = 2;\n  var LEVEL_SUBSUBOPTIMUM = 3;\n\n  var METHOD_TO_UPPER_CASE = 'toUpperCase';\n  var METHOD_TO_LOWER_CASE = 'toLowerCase';\n\n  var METER_CLASS_PREFIX = METER_TAG_NAME[METHOD_TO_LOWER_CASE]() + '-';\n  var METER_VALUE_CLASSES = {};\n  METER_VALUE_CLASSES[LEVEL_OPTIMUM] = METER_CLASS_PREFIX + 'optimum-value';\n  METER_VALUE_CLASSES[LEVEL_SUBOPTIMUM] = METER_CLASS_PREFIX + 'suboptimum-value';\n  METER_VALUE_CLASSES[LEVEL_SUBSUBOPTIMUM] = METER_CLASS_PREFIX + 'even-less-good-value';\n\n  var PROP_MIN = 'min';\n  var PROP_MAX = 'max';\n  var PROP_LOW = 'low';\n  var PROP_HIGH = 'high';\n  var PROP_VALUE = 'value';\n  var PROP_OPTIMUM = 'optimum';\n  var PROP_LABELS = 'labels';\n\n  var METER_PROPS = [PROP_MIN, PROP_MAX, PROP_LOW, PROP_HIGH, PROP_OPTIMUM, PROP_VALUE];\n\n  var METHOD_CREATE_ELEMENT = 'createElement';\n\n  var METER_INITAL_VALUES = {\n    min: 0,\n    max: 1,\n    value: 0\n  };\n\n  // var PRECISION = isFirefox ? 16 : 6; // firefox and chrome use different precision\n\n  var document = window.document;\n\n  var meterElement = document[METHOD_CREATE_ELEMENT](METER_TAG_NAME);\n  var nativeSupport = meterElement[PROP_MAX] === METER_INITAL_VALUES[PROP_MAX];\n\n  var mathMin = Math[PROP_MIN];\n  var mathMax = Math[PROP_MAX];\n\n\n  function between(value, low, high) {\n    return mathMin(mathMax(low, value), high);\n  }\n\n  function isElement(el, tagName) {\n    var PROP_TAGNAME = 'tagName';\n    return el && el[PROP_TAGNAME] && el[PROP_TAGNAME][METHOD_TO_UPPER_CASE]() === tagName;\n  }\n\n  function each(arrLike, fn) {\n    var i = 0;\n    var len = arrLike.length;\n    for (; i < len; i++) {\n      fn(arrLike[i], i);\n    }\n  }\n\n  function isUndefined(obj) {\n    return typeof obj === 'undefined';\n  }\n\n  function isNull(obj) {\n    return obj === null;\n  }\n\n  function isValidValue(obj) {\n    return isNull(obj) || (!isNaN(obj) && isFinite(obj));\n  }\n\n  function parseValue(value, valueForNull) {\n    if (isUndefined(valueForNull)) {\n      valueForNull = null;\n    }\n    return !isValidValue(value) || isNull(value) ?\n      valueForNull :\n      parseFloat(value);\n  }\n\n  function assignValues(target, source) {\n    each(METER_PROPS, function(prop) {\n      target[prop] = parseValue(source[prop]);\n    });\n    return target;\n  }\n\n  function getPropValue(propValues, prop) {\n    var value = propValues[prop];\n    var isNullValue = isNull(value);\n    var min;\n    var max;\n    switch (prop) {\n      case PROP_MIN:\n        value = isNullValue ?\n          METER_INITAL_VALUES[PROP_MIN] :\n          value;\n        break;\n\n      case PROP_MAX:\n        min = getPropValue(propValues, PROP_MIN);\n        value = isNullValue ?\n          mathMax(min, METER_INITAL_VALUES[PROP_MAX]) :\n          mathMax(min, value);\n        break;\n\n      case PROP_LOW:\n        min = getPropValue(propValues, PROP_MIN);\n        value = isNullValue ?\n          min :\n          between(value, min, getPropValue(propValues, PROP_MAX));\n        break;\n\n      case PROP_HIGH:\n        max = getPropValue(propValues, PROP_MAX);\n        value = isNullValue ?\n          max :\n          between(value, getPropValue(propValues, PROP_LOW), max);\n        break;\n\n      case PROP_OPTIMUM:\n        min = getPropValue(propValues, PROP_MIN);\n        max = getPropValue(propValues, PROP_MAX);\n        value = isNullValue ?\n          (max - min) / 2 + min :\n          between(value, min, max);\n        break;\n\n      case PROP_VALUE:\n        min = getPropValue(propValues, PROP_MIN);\n        max = getPropValue(propValues, PROP_MAX);\n        value = isNullValue ?\n          between(METER_INITAL_VALUES[PROP_VALUE], min, max) :\n          between(value, min, max);\n        break;\n\n      default:\n        break;\n    }\n    return value;\n  }\n\n  function meterCalculator(meter) {\n    var propValues = assignValues({}, meter);\n\n    var min = getPropValue(propValues, PROP_MIN);\n    var max = getPropValue(propValues, PROP_MAX);\n    var low = getPropValue(propValues, PROP_LOW);\n    var high = getPropValue(propValues, PROP_HIGH);\n    var optimum = getPropValue(propValues, PROP_OPTIMUM);\n    var value = getPropValue(propValues, PROP_VALUE);\n\n    var percentage = min === max ? 0 : (value - min) / (max - min) * 100;\n    var level = LEVEL_OPTIMUM;\n\n    if (\n      high === max ||\n      low === min ||\n      (optimum >= low && optimum <= high)\n    ) {\n      if (\n        (low <= optimum && value < low) ||\n        (low > optimum && value > low) ||\n        (high < optimum && value < high) ||\n        (high >= optimum && value > high)\n      ) {\n        level = LEVEL_SUBOPTIMUM;\n      }\n    } else if (low === high) {\n      if (\n        (low <= optimum && value < low) ||\n        (high > optimum && value > high)\n      ) {\n        level = LEVEL_SUBSUBOPTIMUM;\n      }\n    } else if (optimum < low) {\n      if (value > low && value <= high) {\n        level = LEVEL_SUBOPTIMUM;\n      } else if (value > high) {\n        level = LEVEL_SUBSUBOPTIMUM;\n      }\n    } else if (optimum > high) {\n      if (value >= low && value < high) {\n        level = LEVEL_SUBOPTIMUM;\n      } else if (value < low) {\n        level = LEVEL_SUBSUBOPTIMUM;\n      }\n    }\n\n    // firefox show diffently from chrome\n    // when value === high/low or min === max\n    if (isFirefox) {\n      if (min === max) {\n        percentage = 100;\n      }\n\n      if (\n          (optimum > high && value === high) ||\n          (optimum < low && value === low)\n       ) {\n        level = LEVEL_SUBOPTIMUM;\n      }\n    }\n\n    return {\n      min: min,\n      max: max,\n      low: low,\n      high: high,\n      optimum: optimum,\n      value: value,\n      percentage: percentage,\n      level: level,\n      className: METER_VALUE_CLASSES[level]\n    };\n  }\n\n  var meterPolyfill = nativeSupport ? NOOP : (function(){\n    /* polyfill starts */\n\n    var POLYFILL_FLAG = '_polyfill';\n\n    var METHOD_REMOVE_CHILD = 'removeChild';\n    var METHOD_SET_ATTRIBUTE = 'setAttribute';\n    var METHOD_HAS_ATTRIBUTE = 'hasAttribute';\n    var METHOD_GET_ATTRIBUTE = 'getAttribute';\n    var METHOD_REMOVE_ATTRIBUTE = 'removeAttribute';\n    var METHOD_APPEND_CHILD = 'appendChild';\n    var METHOD_ADD_EVENT_LISTENER = 'addEventListener';\n    var METHOD_ATTACH_EVENT = 'attachEvent';\n    var METHOD_GET_ELEMENTS_BY_TAG_NAME = 'getElementsByTagName';\n    var METHOD_CALL = 'call';\n    var METHOD_APPLY = 'apply';\n\n    var PROP_PROTOTYPE = 'prototype';\n    var PROP_CONSTRUCTOR = 'constructor';\n    var PROP_PROTO = '__proto__';\n\n    var oObject = Object;\n    var arrayPrototype = Array[PROP_PROTOTYPE];\n    var functionPrototype = Function[PROP_PROTOTYPE];\n    var objectPrototype = oObject[PROP_PROTOTYPE];\n\n    var DIV_TAG_NAME = 'DIV';\n    var LABEL_TAG_NAME = 'LABEL';\n\n    var TIMEOUT_FREQUENCY = 10;\n\n    var documentElement = document.documentElement;\n    var labels = documentElement[METHOD_GET_ELEMENTS_BY_TAG_NAME](LABEL_TAG_NAME);\n    var meters = documentElement[METHOD_GET_ELEMENTS_BY_TAG_NAME](METER_TAG_NAME);\n\n    var PROP_ID = 'id';\n    // var PROP_FOR = 'htmlFor';\n    var ATTR_FOR = 'for';\n\n    var METER_ATTRS = METER_PROPS.concat([PROP_ID]);\n    var LABEL_ATTRS = [ATTR_FOR];\n\n    var defineProperty;\n    var objectDefineProperty = oObject.defineProperty;\n    if (objectDefineProperty) {\n      defineProperty = function(o, property, descriptor) {\n        var PROP_ENUMERABLE = 'enumerable';\n        var PROP_CONFIGURABLE = 'configurable';\n\n        descriptor[PROP_ENUMERABLE] = descriptor[PROP_ENUMERABLE] === false ? descriptor[PROP_ENUMERABLE] : true;\n        descriptor[PROP_CONFIGURABLE] = true;\n\n        try {\n          objectDefineProperty(o, property, descriptor);\n        } catch (e) {\n          if (e.number === -0x7FF5EC54) {\n            descriptor[PROP_ENUMERABLE] = false;\n            objectDefineProperty(o, property, descriptor);\n          }\n        }\n      };\n    } else {\n      var METHOD_DEFINE_SETTER = '__defineSetter__';\n      var METHOD_DEFINE_GETTER = '__defineGetter__';\n      var SUPPORTS_DEFINE_SETTER = METHOD_DEFINE_SETTER in documentElement;\n      defineProperty = function(o, property, descriptor) {\n        var PROP_GET = 'get';\n        var PROP_SET = 'set';\n        if (SUPPORTS_DEFINE_SETTER) {\n          if (descriptor[PROP_GET]) {\n            o[METHOD_DEFINE_GETTER](property, descriptor[PROP_GET]);\n          }\n          if (descriptor[PROP_SET]) {\n            o[METHOD_DEFINE_SETTER](property, descriptor[PROP_SET]);\n          }\n        } else {\n          if (descriptor[PROP_GET]) {\n            o[property] = descriptor[PROP_GET][METHOD_CALL](o);\n          }\n        }\n\n        if (descriptor[PROP_VALUE]) {\n          o[property] = descriptor[PROP_VALUE];\n        }\n      };\n    }\n\n    var create = oObject.create || function(proto) {\n      // simple but enough\n      NOOP[PROP_PROTOTYPE] = proto;\n      return new NOOP();\n    };\n\n    var indexOf = arrayPrototype.indexOf || function(v) {\n      var i = this.length;\n      while (i-- && this[i] !== v) {}\n      return i;\n    };\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\n    var bind = functionPrototype.bind || function(oThis) {\n      var slice = arrayPrototype.slice;\n      var args = slice[METHOD_CALL](arguments, 1);\n      var fnToBind = this;\n      var fnBound = function() {\n        return fnToBind[METHOD_APPLY](\n          oThis,\n          args.concat(slice[METHOD_CALL](arguments))\n        );\n      };\n      fnBound[PROP_PROTOTYPE] = create(fnToBind[PROP_PROTOTYPE] || null);\n      return fnBound;\n    };\n\n    function isMeterProp(prop) {\n      return indexOf[METHOD_CALL](METER_PROPS, prop) > -1;\n    }\n\n    function isMeterAttr(attr) {\n      attr = attr[METHOD_TO_LOWER_CASE]();\n      return indexOf[METHOD_CALL](METER_ATTRS, attr) > -1;\n    }\n\n    function throwTypeError(msg) {\n      throw new TypeError(msg);\n    }\n\n    var HTML_METER_ELEMENT_CONSTRICTOR_NAME = 'HTML' +\n      METER_TAG_NAME.charAt(0)[METHOD_TO_UPPER_CASE]() +\n      METER_TAG_NAME.slice(1)[METHOD_TO_LOWER_CASE]() +\n      'Element';\n\n    // ie 8 document.createElement is not a function\n    // ie 7 document.createElement.apply is undefined\n    var createElement = (function(createElement) {\n      return function(tagName, options) {\n        return createElement[METHOD_APPLY] ?\n          createElement[METHOD_APPLY](document, arguments) :\n          createElement(tagName, options);\n      };\n    })(document[METHOD_CREATE_ELEMENT]);\n\n\n    var METHOD_TO_STRING = 'toString';\n    var nativeToString = oObject[METHOD_TO_STRING];\n    nativeToString = bind[METHOD_CALL](nativeToString, nativeToString);\n    nativeToString[METHOD_TO_STRING] = nativeToString;\n\n    function createNativeFunction(fnName, fn) {\n      function toString() {\n        return 'function ' + fnName + '() { [native code] }';\n      }\n\n      toString[METHOD_TO_STRING] = nativeToString;\n\n      fn[METHOD_TO_STRING] = toString;\n      return fn;\n    }\n\n    var HTMLMeterElement = window[HTML_METER_ELEMENT_CONSTRICTOR_NAME] ||\n      (window[HTML_METER_ELEMENT_CONSTRICTOR_NAME] = (function() {\n        var HTMLMeterElement = createNativeFunction(HTML_METER_ELEMENT_CONSTRICTOR_NAME, function() {\n          throwTypeError('Illegal ' + PROP_CONSTRUCTOR + '' + (isFirefox ? '.' : ''));\n        });\n\n        var htmlElementPrototype = create((window.HTMLElement ||\n          meterElement[PROP_CONSTRUCTOR] ||\n          window.Element ||\n          window.Node ||\n          NOOP)[PROP_PROTOTYPE]);\n\n        defineProperty(htmlElementPrototype, PROP_CONSTRUCTOR, {\n          enumerable: false,\n          value: HTMLMeterElement\n        });\n\n        HTMLMeterElement[PROP_PROTOTYPE] = htmlElementPrototype;\n        HTMLMeterElement[PROP_PROTO] = htmlElementPrototype;\n\n        return HTMLMeterElement;\n      })());\n\n    function unique(array) {\n      var uniqueArray = [];\n      var i = 0;\n      each(array, function(item) {\n        if (indexOf.call(uniqueArray, item) === -1) {\n          uniqueArray[i++] = item;\n        }\n      });\n      return uniqueArray;\n    }\n\n    // there is no moz/ms/o vendor prefix\n    var MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\n    meterElement[METER_TAG_NAME] = METER_TAG_NAME; // for attersAsProps test\n\n    var SUPPORTS_MUTATION_OBSERVER = !!MutationObserver;\n    var SUPPORTS_ADD_EVENT_LISTENER = !!window[METHOD_ADD_EVENT_LISTENER];\n    var SUPPORTS_ATTACH_EVENT = !!window[METHOD_ATTACH_EVENT];\n    var SUPPORTS_ATTERS_AS_PROPS = meterElement[METHOD_GET_ATTRIBUTE](METER_TAG_NAME) === METER_TAG_NAME; // (IE8- bug)\n    var SUPPORTS_HAS_ATTRIBUTE = !!meterElement[METHOD_HAS_ATTRIBUTE];\n    var SUPPORTS_PROPERTYCHANGE = 'onpropertychange' in document;\n    var SUPPORTS_DOM_NODE_INSERTED = false;\n    var SUPPORTS_DOM_ATTR_MODIFIED = false;\n    var SUPPORTS_DOM_NODE_REMOVED = false;\n\n\n    var METHOD_DOM_NODE_INSERTED = 'DOMNodeInserted';\n    var METHOD_DOM_ATTR_MODIFIED = 'DOMAttrModified';\n    var METHOD_DOM_NODE_REMOVED = 'DOMNodeRemoved';\n    if (!SUPPORTS_MUTATION_OBSERVER) {\n      var testDiv = createElement(DIV_TAG_NAME);\n      var testChild = createElement(DIV_TAG_NAME);\n\n      on(testDiv, METHOD_DOM_NODE_INSERTED, function() {\n        SUPPORTS_DOM_NODE_INSERTED = true;\n      });\n      on(testDiv, METHOD_DOM_ATTR_MODIFIED, function() {\n        SUPPORTS_DOM_ATTR_MODIFIED = true;\n      });\n      on(testDiv, METHOD_DOM_NODE_REMOVED, function() {\n        SUPPORTS_DOM_NODE_REMOVED = true;\n      });\n\n      testDiv[METHOD_APPEND_CHILD](testChild);\n      testDiv[METHOD_SET_ATTRIBUTE](PROP_MIN, 1);\n\n      documentElement[METHOD_APPEND_CHILD](testDiv);\n      testDiv[METHOD_REMOVE_CHILD](testChild);\n      documentElement[METHOD_REMOVE_CHILD](testDiv);\n\n      testChild = testDiv = null;\n    }\n\n\n    function on(el, events, listener, useCapture) {\n      each(events.split(' '), function(event) {\n        if (SUPPORTS_ADD_EVENT_LISTENER) {\n          el[METHOD_ADD_EVENT_LISTENER](event, listener, !!useCapture);\n        } else if (SUPPORTS_ATTACH_EVENT) {\n          el[METHOD_ATTACH_EVENT]('on' + event, listener);\n        } else {\n          el['on' + event] = listener;\n        }\n      });\n    }\n\n    var METER_SHADOW_HTML = [\n      '<div class=\"' + METER_CLASS_PREFIX + 'inner-element\">',\n        '<div class=\"' + METER_CLASS_PREFIX + 'bar\">',\n          '<div class=\"' + METER_VALUE_CLASSES[LEVEL_SUBOPTIMUM] + '\" style=\"width: 0\">',\n          '</div>',\n        '</div>',\n      '</div>'\n    ].join('');\n\n    var setTimeout = window.setTimeout;\n    var setInterval = window.setInterval;\n\n    function hasAttribute(el, name) {\n      return SUPPORTS_HAS_ATTRIBUTE ?\n        el[METHOD_HAS_ATTRIBUTE](name) :\n        !isNull(el[METHOD_GET_ATTRIBUTE](name));\n    }\n\n    function observerAttributes(el, attrs, callback) {\n      if (SUPPORTS_MUTATION_OBSERVER) {\n        new MutationObserver(function(mutations) {\n          each(mutations, function(mutation) {\n            var atrr = mutation.attributeName[METHOD_TO_LOWER_CASE]();\n            callback(atrr);\n          });\n        })\n        .observe(el, {\n          attributes: true,\n          attributeFilter: attrs\n        });\n      } else if (SUPPORTS_DOM_ATTR_MODIFIED) {\n        on(el, METHOD_DOM_ATTR_MODIFIED, function(e) {\n          var attr = e.attrName[METHOD_TO_LOWER_CASE]();\n          if (indexOf[METHOD_CALL](attrs, attr) > -1) {\n            callback(attr);\n          }\n        });\n      } else if (SUPPORTS_PROPERTYCHANGE) {\n        on(el, 'propertychange', function(e) {\n          var prop = e.propertyName[METHOD_TO_LOWER_CASE]();\n          if (indexOf[METHOD_CALL](attrs, prop) > -1) {\n            callback(prop);\n          }\n        });\n      } else {\n        // anything ?\n      }\n    }\n\n    function updateMeterStyle(meter) {\n      var result = meterCalculator(meter);\n      try {\n        var valueElement = meter[METHOD_GET_ELEMENTS_BY_TAG_NAME](DIV_TAG_NAME)[2];\n        valueElement.className = result.className;\n        valueElement.style.width = result.percentage + '%';\n      } catch (_) {}\n\n      return meter;\n    }\n\n    // labels\n    function getMeterLables(meter) {\n      var assignedLables = [];\n      var i = 0;\n\n      each(labels, function(label) {\n        if (label.control === meter) {\n          assignedLables[i++] = label;\n          return;\n        }\n        var htmlFor = label.htmlFor;\n        if (!htmlFor) {\n          var labelMeters = label[METHOD_GET_ELEMENTS_BY_TAG_NAME](METER_TAG_NAME);\n          if (indexOf[METHOD_CALL](labelMeters, meter) !== -1) {\n            assignedLables[i++] = label;\n          }\n        } else if (label.htmlFor === meter.id) {\n          assignedLables[i++] = label;\n        }\n      });\n\n      return assignedLables;\n    }\n\n    function polyfill(context) {\n      context = context || documentElement;\n      if (context.length) {\n        return each(context, function(context) {\n          polyfill(context);\n        });\n      }\n\n      var meters = isElement(context, METER_TAG_NAME) ?\n        [context] :\n        context[METHOD_GET_ELEMENTS_BY_TAG_NAME](METER_TAG_NAME);\n\n      each(meters, function(meter) {\n        if (meter[POLYFILL_FLAG]) {\n          return;\n        }\n\n        // ie8 need clone meter might be a new node\n        meter = createShadowDom(meter);\n        defineMeterProperties(meter);\n\n        observerAttributes(meter, METER_ATTRS, function(attr) {\n          triggerAttrChange(meter, attr);\n        });\n\n        updateMeterStyle(meter);\n      });\n    }\n\n    function triggerAttrChange(meter, attr) {\n      if (attr === PROP_ID) {\n        assignLables(meter);\n      } else {\n        updateMeterStyle(meter);\n      }\n    }\n\n    function createShadowDom(meter) {\n      if (meter.canHaveChildren === false || meter.canHaveHTML === false) {\n        // ie 8 fails on innerHTML meter\n        var parent = meter.parentNode;\n        if (parent) {\n          var meterClone = assignValues(createElement(METER_TAG_NAME), meter);\n          parent.replaceChild(meterClone, meter);\n          meter = meterClone;\n\n          // remove </meter><//meter>\n          var slashMeters = parent[METHOD_GET_ELEMENTS_BY_TAG_NAME]('/' + METER_TAG_NAME);\n          each(slashMeters, function(slashMeter) {\n            parent[METHOD_REMOVE_CHILD](slashMeter);\n          });\n\n          // another way to remove </meter><//meter>\n          // var next = meter;\n          // while (next = next.nextSibling) {\n          //   if (next.tagName[METHOD_TO_UPPER_CASE]() === '/' + METER_TAG_NAME) {\n          //     parent[METHOD_REMOVE_CHILD](next);\n          //   }\n          // }\n        }\n      }\n\n      meter.innerHTML = METER_SHADOW_HTML;\n      return meter;\n    }\n\n    function defineMeterProperties(meter) {\n      var METHOD_CLONE_NODE = 'cloneNode';\n      var properties = {};\n\n      var propValues = {};\n      var setAttribute = bind[METHOD_CALL](meter[METHOD_SET_ATTRIBUTE], meter);\n      var cloneNode = bind[METHOD_CALL](meter[METHOD_CLONE_NODE], meter);\n      var removeAttribute = bind[METHOD_CALL](meter[METHOD_REMOVE_ATTRIBUTE], meter);\n\n      each(METER_PROPS, function(prop) {\n        propValues[prop] = parseValue(meter[METHOD_GET_ATTRIBUTE](prop));\n      });\n\n      function getGetter(prop) {\n        return function() {\n          return getPropValue(propValues, prop);\n        };\n      }\n\n      function getSetter(prop) {\n        return function(value) {\n          if (!isValidValue(value)) {\n            var errorMessage = isFirefox ?\n              'Value being assigned to ' + HTML_METER_ELEMENT_CONSTRICTOR_NAME + '.' + prop + ' is not a finite floating-point value.' :\n              'Failed to set the \\'' + prop + '\\' property on \\'' + HTML_METER_ELEMENT_CONSTRICTOR_NAME + '\\': The provided double value is non-finite.';\n            throwTypeError(errorMessage);\n          }\n\n          value = parseValue(value, 0);\n\n          if (propValues[prop] !== value) {\n            setAttribute(prop, value);\n            propValues[prop] = value;\n            updateMeterStyle(meter);\n          }\n          return value;\n        };\n      }\n\n      if (!SUPPORTS_ATTERS_AS_PROPS) {\n        each(METER_PROPS, function(prop) {\n          properties[prop] = {\n            get: getGetter(prop),\n            set: getSetter(prop)\n          };\n        });\n      }\n\n      properties[PROP_LABELS] = {\n        writeable: false,\n        value: getMeterLables(meter)\n      };\n\n      var methodSetAttribute = createNativeFunction(METHOD_SET_ATTRIBUTE, function(attr, value) {\n        setAttribute(attr, value);\n        var prop = attr[METHOD_TO_LOWER_CASE]();\n        if (!isMeterAttr(prop)) {\n          return;\n        }\n        if (prop === PROP_ID) {\n          triggerAttrChange(meter, prop);\n        } else {\n          var value = parseValue(value);\n          if (propValues[prop] !== value) {\n            propValues[prop] = parseValue(value);\n            triggerAttrChange(meter, prop);\n          }\n        }\n      });\n\n      if (!SUPPORTS_ATTERS_AS_PROPS) {\n        properties[METHOD_SET_ATTRIBUTE] = {\n          enumerable: false,\n          value: methodSetAttribute\n        };\n      }\n\n      var methodRemoveAttribute = createNativeFunction(METHOD_REMOVE_ATTRIBUTE, function(attr) {\n        removeAttribute(attr);\n        var prop = attr[METHOD_TO_LOWER_CASE]();\n        if (!isMeterAttr(attr)) {\n          return;\n        }\n        if (prop === PROP_ID) {\n          triggerAttrChange(meter, prop);\n        } else {\n          propValues[prop] = null;\n          triggerAttrChange(meter, prop);\n        }\n      });\n\n      properties[METHOD_REMOVE_ATTRIBUTE] = {\n        enumerable: false,\n        value: methodRemoveAttribute\n      };\n\n      var methodCloneNode = createNativeFunction(METHOD_CLONE_NODE, function(deep) {\n        var clone = cloneNode(false);\n        if (SUPPORTS_ATTERS_AS_PROPS) {\n          clone[METHOD_REMOVE_ATTRIBUTE](POLYFILL_FLAG);\n        }\n        polyfill(clone);\n        return clone;\n      });\n\n      properties[METHOD_CLONE_NODE] = {\n        enumerable: false,\n        value: methodCloneNode\n      };\n\n      properties[POLYFILL_FLAG] = {\n        enumerable: false,\n        writeable: false,\n        value: VERSION\n      };\n\n      properties[PROP_CONSTRUCTOR] = {\n        enumerable: false,\n        value: HTMLMeterElement\n      };\n\n\n      for (var prop in properties) {\n        if (properties.hasOwnProperty(prop)) {\n          defineProperty(meter, prop, properties[prop]);\n        }\n      }\n      meter[PROP_PROTO] = HTMLMeterElement.prototype;\n    }\n\n    function assignLables(meter) {\n      each(meter ? [meter] : meters, function(meter) {\n        var labels = getMeterLables(meter);\n        if (meter.labels.length || labels.length) {\n          defineProperty(meter, PROP_LABELS, {\n            enumerable: true,\n            writeable: false,\n            value: labels\n          });\n        }\n      });\n    }\n\n    // over write document.createElement\n    document[METHOD_CREATE_ELEMENT] = createNativeFunction(METHOD_CREATE_ELEMENT, function() {\n      var el = createElement[METHOD_APPLY](document, arguments);\n      if (isElement(el, METER_TAG_NAME)) {\n        polyfill(el);\n      }\n      return el;\n    });\n\n    var observedLables = [];\n    function observerLabels() {\n      each(labels, function(label) {\n        if (indexOf[METHOD_CALL](observedLables, label) > -1) {\n          return;\n        }\n        observerAttributes(label, LABEL_ATTRS, function() {\n          assignLables();\n        });\n        observedLables.push(label);\n      });\n    }\n\n    function observerDocument() {\n      if (SUPPORTS_MUTATION_OBSERVER) {\n        // observe subtree\n        new MutationObserver(function(mutations) {\n          each(mutations, function(mutation) {\n            polyfill(mutation.target);\n          });\n\n          observerLabels();\n          assignLables();\n        })\n        .observe(documentElement, {\n          subtree: true,\n          childList: true\n        });\n      } else {\n        if (SUPPORTS_DOM_NODE_INSERTED) {\n          on(documentElement, METHOD_DOM_NODE_INSERTED, function(e) {\n            polyfill(e.target);\n            observerLabels();\n            assignLables();\n          });\n        } else {\n          setInterval(function() {\n            each(labels, function(label) {\n              if (indexOf[METHOD_CALL](observedLables, label) === -1) {\n                // new label inserted\n                observerLabels();\n                assignLables();\n              }\n            });\n          }, TIMEOUT_FREQUENCY);\n        }\n\n        if (SUPPORTS_DOM_NODE_REMOVED) {\n          on(documentElement, METHOD_DOM_NODE_REMOVED, function(e) {\n            setTimeout(assignLables, TIMEOUT_FREQUENCY);\n          });\n        } else {\n          setInterval(function() {\n            each(observedLables, function(label, index) {\n              if (indexOf[METHOD_CALL](labels, label) === -1) {\n                // label has been removed\n                observedLables.splice(index, 1);\n                assignLables();\n              }\n            });\n          }, TIMEOUT_FREQUENCY);\n        }\n      }\n\n      observerLabels();\n    }\n\n    (function() {\n      var isReady = false;\n      var isTop = false;\n\n      function setReady() {\n        isReady = true;\n      }\n\n      function completed() {\n        if (document.readyState === 'complete') {\n          setReady();\n        }\n      }\n\n      try {\n        isTop = isNull(window.frameElement);\n      } catch (_) {}\n\n      if (!SUPPORTS_ADD_EVENT_LISTENER && documentElement.doScroll && isTop) {\n        (function doScroll() {\n          try {\n            documentElement.doScroll();\n            setReady();\n          } catch (_) {\n            setTimeout(doScroll, TIMEOUT_FREQUENCY);\n          }\n        })();\n      }\n\n      on(document, 'DOMContentLoaded', setReady);\n      on(window, 'load', setReady);\n      on(document, 'readystatechange', completed);\n      completed();\n\n      (function polyfillWhenReady() {\n        if (isReady) {\n          polyfill();\n          observerDocument();\n        } else {\n          setTimeout(polyfillWhenReady, TIMEOUT_FREQUENCY);\n        }\n      })();\n    })();\n\n    return polyfill;\n  })();\n\n  meterPolyfill.version = VERSION;\n  meterPolyfill.support = nativeSupport;\n  meterPolyfill.CLASSES = METER_VALUE_CLASSES;\n  meterPolyfill.LEVEL_SUBOPTIMUM = LEVEL_SUBOPTIMUM;\n  meterPolyfill.LEVEL_OPTIMUM = LEVEL_OPTIMUM;\n  meterPolyfill.LEVEL_SUBSUBOPTIMUM = LEVEL_SUBSUBOPTIMUM;\n  meterPolyfill.calc = meterCalculator;\n\n  return meterPolyfill;\n});\n"]}